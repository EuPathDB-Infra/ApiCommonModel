 [templateStart] 
name=htsSnpSampleDatabase
anchorFile=ApiCommonShared/Model/lib/gbrowse/${projectName}na.conf 
prop=datasetName
prop=gbrowseDBName
prop=datasetDisplayName
prop=datasetDescrip
prop=projectName
prop=sampleName
prop=experimentName
prop=organismAbbrev
prop=organismAbbrevInternal
>templateTextStart<
[${gbrowseDBName}:database]
db_adaptor   = Bio::DB::Sam
db_args      = sub { { -bam => $CFG->bam_file_path('${organismAbbrevInternal}') . '/${experimentName}/${sampleName}/result.bam' } }
>templateTextEnd<



[templateStart] 
name=htsSnpSampleCoverageXYTrack
anchorFile=ApiCommonShared/Model/lib/gbrowse/${projectName}na.conf 
prop=datasetName
prop=gbrowseDBName
prop=datasetDisplayName
prop=datasetDescrip
prop=projectName
prop=sampleName
prop=experimentName
prop=organismAbbrevDisplay
prop=organismAbbrev
>templateTextStart<
[${gbrowseDBName}:3000]
feature        = coverage
database       = ${gbrowseDBName}
glyph          = wiggle_xyplot
scale          = both
height         = 50 
fgcolor        = blue 
bgcolor        = blue 
label          = 0  

[${gbrowseDBName}]
feature        = read_pair
glyph          = segments
database       = ${gbrowseDBName}
draw_target    = 1
show_mismatch  = 1
mismatch_color = coral
bgcolor        = cornflowerblue
fgcolor        = black
height         = 3
label density  = 1
bump           = fast
connector      = dashed
key            = ${sampleName} Coverage aligned to ${organismAbbrev} [Reads < 3k; Bases < 100bp]
#category       = Population Biology: Isolates: ${organismAbbrevDisplay} : ${datasetDisplayName}
category     = sub { GBrowse::Configuration::getOntologyCategoryFromTrackName(@_, "${organismAbbrevDisplay} : ${datasetDisplayName} : Aligned Genomic Sequence Reads") }
citation       = sub {  $CFG->citationFromExtDatabaseNamePattern( '${datasetName}' ) }
balloon hover  = sub { GBrowse::PopupAndLinks::BamFileSeqBalloon(shift) }

>templateTextEnd<

[GENERAL]

initial landmark = CH991767:220600..229950 
examples = CH991767:220600..229950
           AACB02000007:225400..227800
           GL50803_102438

#include "common/common_general.conf"

### TRACK CONFIGURATION ####

#include "common/common_tracks.conf"
#include "common/unifiedMassSpec.conf"
#include "common/synteny.conf"
#include "common/blastx.conf"
#include "common/scaffolds.conf"

[Synteny]
subtrack table  = :"assemblage A contig" 'Giardia Assemblage A isolate WB' contig =glam_span ;
                  :"assemblage A genes" 'Giardia Assemblage A isolate WB' genes =glam_gene ;
                  :"assemblage B contig" 'Giardia Assemblage B isolate GS' contig =glab_span ;
                  :"assemblage B genes" 'Giardia Assemblage B isolate GS' genes =glab_gene ;
                  :"assemblage E contig" 'Giardia Assemblage E isolate P15' contig =glae_span ;
                  :"assemblage E genes" 'Giardia Assemblage E isolate P15' genes =glae_gene ;
 

[RatnerMassSpecPeptides]
feature      = domain:Ratner
sqlName      = domain:MassSpecPeptide 
sqlParam     = source:Ratner&&edName:='DTASelect-filter_032108_Proteomics'
category     = Protein Expression Evidence: A. Mass Spec Peptides
glyph        =  segments
# -0 turns off transcript arrows at highlevel zoom
arrow_length = -0
font2color   = black
fgcolor = 
connector_color = grey
connector    = hat
bgcolor      = sub { GBrowse::Display::massSpecBgColor(shift) }
filter       = sub { GBrowse::Filter::filterByExtDbNameAndDescription(shift, 'DTASelect', 'GL') }
height       = sub { GBrowse::Display::heightBySOTerm(shift, 'protein_coding', 7, 5) }
pad_bottom   = -1
description  = 0 
balloon hover  = sub { GBrowse::PopupAndLinks::massSpecTitle(shift, 'Ratner') }
label 		 = 0
key          = MS/MS Peptides (Ratner, et al.)
citation     = <b>Preliminary</b> analysis by Daniel Ratner, et al. 
                Department of Bioengineering, University of Washington, 
                William H. Foege Building, Box 355061, Seattle, WA 98195-5061<br>


[TachezyMassSpecPeptides] 
feature      = domain:Tachezy
sqlName      = domain:MassSpecPeptide 
sqlParam     = source:Tachezy&&edName:='Giardia proteomics data from Tachezy lab'
category     = Protein Expression Evidence: A. Mass Spec Peptides
glyph        =  segments
# -0 turns off transcript arrows at highlevel zoom
arrow_length = -0
font2color   = black
fgcolor = 
connector_color = grey
connector    = hat
bgcolor      = sub { GBrowse::Display::massSpecBgColor(shift) }
filter       = sub { GBrowse::Filter::filterByExtDbNameAndDescription(shift, 'Tachezy', 'GL') }
height       = sub { GBrowse::Display::heightBySOTerm(shift, 'protein_coding', 7, 5) }
pad_bottom   = -1
description  = 0 
balloon hover  = sub { GBrowse::PopupAndLinks::massSpecTitle(shift, 'Tachezy') }
label            = 0
key          = MS/MS Peptides (Tachezy, et al.)
citation     = G. intestinalis mitosome enriched fraction
               Jan Tachezy, Department of Parasitology, Charles University in Prague<br> 


[EST_10]
feature     = alignment:BLAT
glyph       = segments
bgcolor		  = lightskyblue
fgcolor		  = blue
description = 0
height      = 8
label       = 0
link        = sub { GBrowse::PopupAndLinks::estLink(shift) }
balloon hover = sub { GBrowse::PopupAndLinks::estTitle(shift) } 
category     = Transcript Expression Evidence: A. Alignments
preset     = Annotation
key 		   = EST Alignments - Top 10




[SAGEtags]
feature      = SAGE:3-5prime
#sqlName      = SAGE:3-5prime
#sqlParam     = rawCount:0
category     = Transcript Expression Evidence: A. Alignments
glyph        = arrow
strand_arrow = 0
linewidth    = 2
height       = 8
bgcolor      = blue
fgcolor      = blue
link        = sub { GBrowse::PopupAndLinks::sageTagLink(shift) }
balloon hover  = sub { GBrowse::PopupAndLinks::sageTagTitle(shift) } 
key          = SAGE tags
label	       = 0
citation     = SAGE tag sequences are mapped to genome assembly contigs and 
  predicted open reading frames (ORFs) using custom software. 
  As SAGE tags are generated by the most 3 prime Nla III restriction site, 
  many are from the 3 prime untranslated region (UTR) of mRNA transcripts. 
  SAGE tags are thus mapped to theoretical transcripts, which are modeled as the 
  complete Open Reading Frame (ORF) plus 15 bp of 3 prime UTR. 
  This model is used for both sense and anti-sense transcripts. 
  Tag Frequencey equals to Tag count and  Percentage=(Tag count/38015)*100. 
  The total good tags sequenced is 38015.


########### the following is a test for bigwig data set #######


[BigWigP15:database]
db_adaptor    = Bio::DB::BigWigSet
db_args       = -dir /var/www/Common/apiSiteFilesMirror/auxiliary/GiardiaDB/bigwigtest/P15

[BigWigP15Intervals]
feature  = summary
database = BigWigP15
glyph    = wiggle_xyplot
min_score = 0
max_score = +10
height = 80
bicolor_pivot = zero
pos_color = blue
neg_color = red
fgcolor = blue
key       = RNA Seq P15
#color_series = 1
#bump  = overlap
#color_cycle = yellow red orange blue
#opacity = 0.7
scale = both

[BigWigGS:database]
db_adaptor    = Bio::DB::BigWigSet
db_args       = -dir /var/www/Common/apiSiteFilesMirror/auxiliary/GiardiaDB/bigwigtest/GS

[BigWigGSIntervals]
feature  = summary
database = BigWigGS
glyph    = wiggle_xyplot
min_score = 0
max_score = +10
height = 80
bicolor_pivot = zero
pos_color = blue
neg_colo = red
fgcolor = blue
key       = RNA Seq GS
#color_series = 1
#bump  = overlap
#color_cycle = yellow red orange blue
#opacity = 0.7
scale = both

[BigWigWB:database]
db_adaptor    = Bio::DB::BigWigSet
db_args       = -dir /var/www/Common/apiSiteFilesMirror/auxiliary/GiardiaDB/bigwigtest/WB

[BigWigWBIntervals]
feature  = summary
database = BigWigWB
glyph    = wiggle_xyplot
min_score = 0
max_score = +10
height = 60
fgcolor = blue
key       = RNA Seq WB
#color_series = 1
#bump  = overlap
#color_cycle = red lightblue orange blue
color_cycle = orangered lightblue orange steelblue
#opacity = 0.7
scale = both

[BigWigWBO:database]
db_adaptor    = Bio::DB::BigWigSet
db_args       = -dir /var/www/Common/apiSiteFilesMirror/auxiliary/GiardiaDB/bigwigtest/WB

[BigWigWBOIntervals]
feature  = summary
database = BigWigWBO
glyph    = wiggle_xyplot
min_score = 0
max_score = +10
height = 80
key       = RNA Seq WB overlap
color_series = 1
bump  = overlap
color_cycle = orangered lightblue orange steelblue
opacity = 0.5
scale = both



[BigWigWB2:database]
db_adaptor    = Bio::DB::BigWigSet
db_args       = -dir /var/www/Common/apiSiteFilesMirror/auxiliary/GiardiaDB/bigwigtest2

#[BigWigWBOIntervals]
#database = BigWigWB2
#feature = RUM:GUS
#glyph = wiggle_xyplot
#metadata = /var/www/Common/apiSiteFilesMirror/auxiliary/GiardiaDB/bigwigtest2/metadata.index

[BigWigWB2Intervals]
feature  = RUM:GUS
database = BigWigWB2
glyph    = wiggle_xyplot
min_score = 0
max_score = +10
height = 40
key       = RNA Seq GS/P15/WB Samples 
#color_series = 1
#bump  = overlap
#fgcolor = blue
#bgcolor = blue working
bgcolor = sub { my $f = shift;
                my ($expt) = $f->get_tag_values('expt');
                my ($strand) = $f->get_tag_values('strand');
								return 'blue' if ($expt eq 'unique' && $strand eq 'forward');
								return 'red' if ($expt eq 'unique' && $strand eq 'reverse');
								return 'lightslategray' if( $expt eq 'multiple' && $strand eq 'forward');
								return 'dimgray' if ($expt eq 'multiple' && $strand eq 'reverse');
								return 'blue';
								}
#color_cycle = lightslategray blue dimgray red
#opacity = 0.5
subtrack select = Sample tag_value sample ;
                  "Genome Alignment" tag_value expt ;
                  Strand tag_value strand ;
subtrack table  = P15 unique forward * ;
								  P15 unique reverse * ;
								  P15 multiple forward ;
								  P15 multiple reverse ;
                  GS unique forward * ;
								  GS unique reverse * ;
								  GS multiple forward ;
								  GS multiple reverse ;
                  WB unique forward * ;
								  WB unique reverse * ;
								  WB multiple forward ;
								  WB multiple reverse ;
scale = both
link         =  javascript:void(0)
title        = sub{}
#balloon hover  = sub {}
#pad_left            = 220
group_lable = 1
group_label_position = top
#label_position=left


[BigWigP17:database]
db_adaptor    = Bio::DB::BigWigSet
db_args       = -dir /home/hwang/projects/bigwig/GiardiaDB/P17

[BigWigP17Intervals]
#feature  = summary
feature  = RUM:GUS
database = BigWigP17
glyph    = wiggle_xyplot
min_score = -10
max_score = +10
height = 80
bicolor_pivot = zero
pos_color = blue
neg_color = red
fgcolor = blue
key       = Bigwig set meta -  P17
#color_series = 1
#bump  = overlap
#color_cycle = yellow red orange blue
#opacity = 0.7
opacity = 0.8
subtrack select = Expt tag_value expt
subtrack table  = :Unique Unique ;
								  :NU NU;
scale = both


#[ChIP-Seq]
#database = BigWigP16
#feature  = RUM::GUS
#glyph    = wiggle_xyplot
#key = BigWig P16 metadata only
#metadata = /home/hwang/projects/bigwig/GiardiaDB/P16/metadata.index

[BigWigNU:database]
db_adaptor    = Bio::DB::BigWigSet
db_args       = -dir /home/hwang/projects/bigwig/GiardiaDB/P15/NU

[BigWigIntervals]
feature  = summary
database = BigWigNU
glyph    = wiggle_xyplot
min_score = -10 
max_score = +10 
height = 60
category     = RNA Seq: A. Non Unique
bicolor_pivot = zero
pos_color = blue
neg_color = red 
key       = Bigwig set NU - P15 
#bump  = sub { "overlap"; }
bump  =  overlap
opacity = 1 
scale = both

[BigWigUnique:database]
db_adaptor    = Bio::DB::BigWigSet
db_args       = -dir /home/hwang/projects/bigwig/GiardiaDB/P15/Unique

[BigWigUniqueIntervals]
feature  = summary
database = BigWigUnique
glyph    = wiggle_xyplot
min_score = -10 
max_score = +10 
height = 60
bicolor_pivot = zero
pos_color = blue
neg_color = red 
category     = RNA Seq: A. Unique
key       = Bigwig set Unique -  P15 
bump  = overlap
opacity = 1 
scale = both

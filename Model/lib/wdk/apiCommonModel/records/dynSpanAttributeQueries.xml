<wdkModel>


    <querySet name="DynSpanAttributes" queryType="attribute">


        <sqlQuery name="Bfmv">
            <column name="source_id" ignoreCase="true"/>
            <column name="project_id" ignoreCase="true"/>
            <column name="length"/>
           <sql>
            <![CDATA[
                SELECT $source_id as source_id, 
                       'PlasmoDB' as project_id,
                       $$source_id$$ as length
                FROM dual
             ]]>
           </sql>
        </sqlQuery>


         <sqlQuery name="Organism">
            <column name="source_id" ignoreCase="true"/>
            <column name="project_id" ignoreCase="true"/>
            <column name="organism" ignoreCase="true"/>  

           <sql>
            <![CDATA[
                SELECT 'Pf3D7_05:10-100' as source_id, 
                       'PlasmoDB' as project_id, 
                       'Plasmodium falciparum' as organism 
                FROM dual

             ]]>
           </sql>
        </sqlQuery>



<!--
                SELECT bfmv.source_id, bfmv.project_id, bfmv.length, bfmv.organism
                  FROM apidb.SequenceAttributes bfmv
                WHERE bfmv.source_id = SUBSTR(source_id,':',1,1)
-->

 <sqlQuery name="GeneCount">
            <column name="source_id"/>
            <column name="project_id"/>
            <column name="gene_count"/>
            <sql>
            <![CDATA[
           select sa.source_id, sa.project_id, nvl(the_count, 0) as gene_count
           from apidb.sequenceAttributes sa,
             (select sa.source_id, sa.project_id, count(*) as the_count
              from apidb.sequenceAttributes sa, apidb.geneAttributes ga
              where ga.sequence_id = sa.source_id
              group by sa.source_id, sa.project_id) gc
           where sa.source_id = gc.source_id(+)
             ]]>
           </sql>
        </sqlQuery>



  </querySet>


</wdkModel>

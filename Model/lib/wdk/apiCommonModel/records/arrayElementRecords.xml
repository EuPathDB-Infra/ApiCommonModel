<wdkModel>

    <recordClassSet name="ArrayElementRecordClasses" includeProjects="HostDB,SchistoDB,InitDB">
        <recordClass name="ArrayElementRecordClass"
                     urlPath="array-element"
                     type="Array Element">

      <testParamValues>
         <paramValue name="source_id">AAKM01000006</paramValue>
         <paramValue name="project_id">PlasmoDB</paramValue>
      </testParamValues>

            <!-- primary key definition -->
            <primaryKeyAttribute name="primary_key"
                                 displayName="Gene">
                <columnRef>source_id</columnRef>
                <columnRef>project_id</columnRef>
                <text>
                    <![CDATA[
                    $$project_id$$:$$source_id$$
                    ]]>
                </text>                
            </primaryKeyAttribute>


          <!-- =============================================================== -->
          <!--   Reporters -->  
          <!-- =============================================================== -->

          <reporter name="tabular" displayName="Summary - TAB Delimited"
                    implementation="org.gusdb.wdk.model.report.TabularReporter"/>
          <reporter name="fullRecord" displayName="Detailed"
                    implementation="org.gusdb.wdk.model.report.FullRecordReporter" />



        <!-- =================================================================== -->
        <!--  Attributes  ++++++++-->
        <!-- =================================================================== -->

        <attributeQueryRef ref="ArrayElementAttributes.ProviderAndOrganism">
            <columnAttribute name="source_id" displayName="Source ID" internal="true"/>
            <columnAttribute name="project_id" displayName="Project ID" internal="true"/>
            <columnAttribute name="provider" displayName="Provider"
                             internal="false"/>
            <columnAttribute name="genus_species" displayName="genus_species"
                             internal="true"/>
            <columnAttribute name="organism" displayName="Organism"
                             internal="false"/>
            <columnAttribute name="sequence" displayName="Sequence"
                             internal="false"/>
        </attributeQueryRef>

     <!-- =================================================================== -->
     <!-- Tables ++++++++-->
     <!-- =================================================================== -->

        <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
        <!-- mapped genes table -->  
        <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
        <table name="Genes"
               displayName="Mapped Genes"
               queryRef="ArrayElementTables.Genes">
            <columnAttribute name="gene_source_id" internal="true"/>
            <linkAttribute name="gene" displayName="Gene">
                 <displayText>
                    <![CDATA[ $$gene_source_id$$ ]]>
                 </displayText>
                 <url>
                    <![CDATA[showRecord.do?name=TranscriptRecordClasses.TranscriptRecordClass&primary_key=$$gene_source_id$$]]>
                 </url>
            </linkAttribute>
        </table>

        <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
        <!-- genomic locations table -->  
        <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
         <table name="GenomicLocations"
               displayName="Genomic Locations"
               queryRef="ArrayElementTables.GenomicLocations">
            <columnAttribute name="source_id" internal="true"/>
            <columnAttribute name="genomic_source_id" internal="true"/>
            <linkAttribute name="genomicSequence" displayName="Genomic Sequence">
                 <displayText>
                    <![CDATA[ $$genomic_source_id$$ ]]>
                 </displayText>
                 <url>
                    <![CDATA[showRecord.do?name=SequenceRecordClasses.SequenceRecordClass&primary_key=$$genomic_source_id$$]]>
                 </url>
            </linkAttribute>
            <columnAttribute name="min_subject_start" displayName="Start"/>
            <columnAttribute name="max_subject_end" displayName="End"/>
            <columnAttribute name="gbrowse_start" internal="true"/>
            <columnAttribute name="gbrowse_end" internal="true"/>
            <columnAttribute name="is_reversed" displayName="Reversed"/>
            <linkAttribute name="gbrowseLink" displayName="Genome Browser">
                 <displayText>
                    <![CDATA[ view ]]>
                 </displayText>
               <url>
                <![CDATA[
                /cgi-bin/gbrowse/plasmodb/?name=$$genomic_source_id$$:$$gbrowse_start$$-$$gbrowse_end$$;enable=Gene
                ]]>
                </url>
            </linkAttribute>
        </table>

       </recordClass>
    </recordClassSet>
</wdkModel>

<wdkModel>
  <querySet name="SampleAttributes" queryType="attribute" isCacheable="false">

       <testRowCountSql>
	 SELECT count(*) FROM ApidbTuning.sampleid
       </testRowCountSql>

        <sqlQuery name="Bfmv">
            <column name="name"/>
            <column name="description"/>
            <column name="type"/>
            <column name="c_biological_sex"/>
            <column name="c_country_name"/>
            <column name="c_host_common_name"/>
            <column name="observed_otus"/>
            <column name="Chao_1"/>
            <column name="Shannon"/>
            <column name="Simpson"/>
           <sql>
            <![CDATA[
select 
 sa.name
,type
,description
,c_biological_sex
,c_country_name
,c_host_common_name
,observed_otus 
,round(Chao_1,4) as Chao_1
,round(Shannon,4) as Shannon
,round(Simpson,4) as Simpson
FROM
  apidbtuning.sampleattributes sa, 
  (Select name
          ,observed_otus 
          ,Chao_1
          ,Shannon
          ,Simpson
     from RESULTS.AlphaDiversity ad, Apidbtuning.Sampledownstream sd
    where sd.output_protocol_app_node_id = ad.PROTOCOL_APP_NODE_ID) ad
 where sa.name = ad.name
	    ]]>
           </sql>
	</sqlQuery>

  </querySet>
</wdkModel>


<wdkModel>
  <recordClassSet name="CompoundRecordClasses" excludeProjects="EuPathDB">

    <recordClass name="CompoundRecordClass" displayName="Compound"
		 attributeOrdering="overview" doNotTest="true">

      <testParamValues>
	<paramValue name="source_id">CID:93072</paramValue>
          <paramValue name="project_id">@PROJECT_ID@</paramValue>
      </testParamValues>

      <!-- primary key definition -->
      <primaryKeyAttribute name="primary_key"
			   displayName="ChEBI ID">
	<columnRef>source_id</columnRef>
	<columnRef>project_id</columnRef>
	<text>
	  <![CDATA[
		   $$source_id$$
	  ]]>
	</text>                
      </primaryKeyAttribute>

      <!-- =============================================================== -->
      <!--   Reporters -->  
      <!-- =============================================================== -->

          <reporter name="tabular" displayName="Tab delimited (Excel): choose from columns"
                    implementation="org.gusdb.wdk.model.report.TabularReporter">
             <property name="page_size">500</property>
          </reporter>

          <reporter name="fullRecord" displayName="Text: choose from columns and/or tables" 
                    implementation="org.apidb.apicommon.model.report.FullRecordCachedReporter">
              <property name="table_cache">apidb.CompoundDetail</property>
              <property name="project_id_column">project_id</property>
              <property name="record_id_column">source_id</property>
          </reporter>

       <reporter name="xml"  displayName="XML: choose from columns and/or tables" 
                    implementation="org.gusdb.wdk.model.report.XMLReporter">
      </reporter>
      <reporter name="json"  displayName="json: choose from columns and/or tables" 
                    implementation="org.gusdb.wdk.model.report.JSONReporter">
      </reporter>

      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
      <!-- BFMV attributes -->  
      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

      <attributeQueryRef ref="CompoundAttributes.Bfmv">
	<columnAttribute name="project_id" internal="true" inReportMaker="false"/>
	<columnAttribute name="source_id" displayName="Compound"/>
	<columnAttribute name="compound_link" internal="true" inReportMaker="false" />
	<columnAttribute name="definition" displayName="Definition" />
	<columnAttribute name="secondary_ids"  displayName="Secondary ChEBI IDs" />
	<columnAttribute name="name" displayName="Compound Name" />
      </attributeQueryRef>

      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
      <!-- overview -->  
      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
      <textAttribute name="overview" displayName="Overview"
		     inReportMaker="false" internal="true">
	<text>
	  <![CDATA[ 
             <table>
	     <tr><td><b>Compound Name(s):</b></td>
	     <td>$$name$$</td></tr>
	     <tr><td><b>ChEBI ID:</b></td>
	     <td>$$compound_link$$</td></tr>
	     <tr><td><b>Definition:</b></td>
	     <td>$$definition$$</td></tr>
	     <tr><td><b>Secondary ChEBI IDs:</b></td>
	     <td>$$secondary_ids$$</td></tr>
	     </table>
	  ]]>
	</text>
      </textAttribute>


      <!-- =================================================================== -->
      <!-- Compound Attributes -->
      <!-- =================================================================== -->

      <attributeQueryRef ref="CompoundAttributes.Synonyms" >
	<columnAttribute name="synonyms" displayName="Synonyms" internal="true" />
			 
      </attributeQueryRef>  
 
      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
      <!-- Number of Pathways Associated -->
      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

         <attributeQueryRef ref="CompoundAttributes.PathwaysCount">
            <columnAttribute displayName="No. of Pathways" internal="true"  inReportMaker="false" 
                    name="pathway_count"/>
          </attributeQueryRef>
      <!-- =================================================================== -->
      <!-- Compound Tables -->
      <!-- =================================================================== -->

      <table name="Properties" displayName="Compound Properties"
	     queryRef="CompoundTables.Properties">
	<columnAttribute name="type" displayName="Property "/>
	<columnAttribute name="value" displayName="Value" />
      </table>

      <table name="IupacNames" displayName="IUPAC Names"
	     queryRef="CompoundTables.IupacNames">
	<columnAttribute name="value" displayName="Value" />
      </table>

      <table name="Synonyms" displayName="Compound Synonyms"
	     queryRef="CompoundTables.Synonyms">
	<columnAttribute name="value" displayName="Value" />
	<columnAttribute name="source" displayName="Source" />
      </table>

      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
      <!-- Compounds and Enzymes from Metabolic Pathways table          -->
      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

      <table name="CompoundsMetabolicPathways"
	     displayName="Metabolic Pathway Reactions"
	     queryRef="CompoundTables.CompoundsFromMetabolicPathways">

	<columnAttribute displayName="Type" name="type"/>
	<columnAttribute displayName="Source" name="pathway_source" inReportMaker="true" internal="true"/>
	<columnAttribute displayName="EC Number" name="enzyme_link" inReportMaker="false"/>
	<columnAttribute displayName="EC Number" name="enzyme" inReportMaker="true" internal="true"/>
	<columnAttribute displayName="Reaction" name="reaction_link" inReportMaker="false"/>
	<columnAttribute displayName="Reaction" name="reaction" inReportMaker="true" internal="true"/>
	<columnAttribute displayName="Pathway" name="pathway_name" inReportMaker="true" internal="true"/>
	<columnAttribute displayName="Pathway" name="pathway_source_id" inReportMaker="false" internal="true"/>
	<linkAttribute name="pathway_link" displayName="Pathway" inReportMaker="false">
	  <displayText>
	    <![CDATA[
		     $$pathway$$
	    ]]>
	  </displayText>
	  <url>
	    <![CDATA[
		     showRecord.do?name=PathwayRecordClasses.PathwayRecordClass&source_id=$$pathway_source_id$$&project_id=@PROJECT_ID@
	    ]]>
	  </url>
	</linkAttribute>
      </table>

      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
      <!-- Related Compounds          -->  
      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
      <!-- Looks like this is NOT needed any more
      <table name="RelatedCompounds" displayName="Related Compounds"
	     queryRef="CompoundTables.RelatedCompounds">
	<columnAttribute name="related_id" displayName="Compound" />
	<columnAttribute name="type" displayName="Type" />
	<columnAttribute name="subst_id" displayName="Substance ID "/>
      </table>
      -->

      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
      <!-- Mass Spec (Metabolite)  Graphs -->  
      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

      <table name="MassSpecGraphs"
	     displayName="Internal Mass Spec Graphs"
	     queryRef="CompoundTables.MassSpecGraphs" inReportMaker="false">
	<columnAttribute displayName="source_id" name="source_id"/>
	<columnAttribute displayName="project_id" name="project_id"/>
	<columnAttribute displayName="graph_ids" name="graph_ids"/>
	<columnAttribute displayName="module" name="module"/>
	<columnAttribute displayName="species" name="species"/>
	<columnAttribute displayName="mainOpen" name="mainOpen"/>
	<columnAttribute displayName="dataOpen" name="dataOpen"/>
	<columnAttribute displayName="display_name" name="display_name"/>
	<columnAttribute displayName="description" name="description"/>
	<columnAttribute displayName="x_axis" name="x_axis"/>
	<columnAttribute displayName="y_axis" name="y_axis"/>
	<columnAttribute displayName="visible_parts" name="visible_parts"/>
	<columnAttribute displayName="has_graph_data" name="has_graph_data"/>
	<columnAttribute displayName="has_meta_data" name="has_meta_data"/>
	<columnAttribute displayName="dataset_name" name="dataset_name"/>
	<columnAttribute displayName="is_graph_custom" name="is_graph_custom"/>
	<propertyList name="excludeFromDumper"><value>true</value></propertyList>
      </table>

    </recordClass>
  </recordClassSet>
</wdkModel>

<wdkModel>
  <querySet name="CompoundAttributes" queryType="attribute" includeProjects="PlasmoDB">

        <sqlQuery name="Bfmv">
            <column name="project_id"/>
            <column name="source_id"  />
            <column name="compound_id"  />
            <column name="substance_id"  />
            <column name="mol_wt"  />
            <column name="formula"  />
           <sql>
            <![CDATA[
                SELECT compound_id, source_id, substance_id, mol_wt, formula, '@PROJECT_ID@' AS project_id
                FROM ApidbTuning.CompoundAttributes
	    ]]>
           </sql>
	</sqlQuery>

	<sqlQuery name="Synonyms">
	  <column name="project_id"/>
	  <column name="source_id"/>
	  <column name="synonyms"/>
	  <sql>
	    <![CDATA[
	       SELECT ca.source_id, '@PROJECT_ID@' as project_id, 
	           apidb.tab_to_string(set(CAST(COLLECT(s2.value) AS apidb.varchartab)),', ') as synonyms
	       FROM apidb.pubchemsubstance s1, apidb.pubchemsubstance s2, ApidbTuning.CompoundAttributes ca
	       WHERE s1.property = 'CID'
               AND s1.value = ca.compound_id
	       AND s2.property = 'synonyms'
	       AND s1.substance_id = s2.substance_id
	       GROUP BY ca.source_id
	       UNION
	       (SELECT distinct ca.source_id, '@PROJECT_ID@' as project_id, '-' as synonymns   
	       FROM ApidbTuning.CompoundAttributes ca, apidb.PubChemSubstance s, 
	       (SELECT distinct substance_id FROM apidb.PubChemSubstance
	        MINUS
	        SELECT distinct substance_id FROM apidb.PubChemSubstance WHERE property='synonyms'
	       ) diff 
	       WHERE s.substance_id = diff.substance_id
	       AND ca.substance_id like diff.substance_id)
	    ]]>
	  </sql>
	</sqlQuery>
       <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
       <!-- Number of associated metabolic pathways -->
       <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
        <sqlQuery name="PathwaysCount">
            <column name="source_id"/>
            <column name="project_id"/>
            <column name="pathway_count"/>
            <sql>
            <![CDATA[
        SELECT  count (distinct pc.network_id) as pathway_count, '@PROJECT_ID@' as project_id, pc.compound_source_id as source_id
        from   ApiDBTuning.PathwayCompounds pc 
        group by pc.compound_source_id
            ]]>
            </sql>
        </sqlQuery>

  </querySet>
</wdkModel>

<wdkModel>

  <querySet name="OrganismTables" queryType="table" isCacheable="false" excludeProjects="TrichDB">

      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
      <!-- Organism table query  -->  
      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

      <sqlQuery name="SequenceCounts">
            <column name="project_id"/>
            <column name="source_id"/> 
            <column name="sequence_type"/>
            <column name="sequence_count"/>
            <sql>
            <![CDATA[
select oa.project_id, oa.source_id, sa.sequence_type, count(*) as sequence_count
from apidbtuning.organismattributes oa, apidbtuning.sequenceattributes sa
where oa.component_taxon_id = sa.taxon_id
and oa.project_id = sa.project_id
group by oa.project_id, oa.source_id, sa.sequence_type
order by count(*) desc
            ]]>
            </sql>
        </sqlQuery> 


      <sqlQuery name="GeneCounts">
            <column name="project_id"/>
            <column name="source_id"/> 
            <column name="gene_type"/>
            <column name="gene_count"/>
            <column name="pseudo"/>
            <sql>
            <![CDATA[
select oa.project_id, oa.source_id, ga.gene_type, decode(ga.is_pseudo, 1, 'yes', 'no') as pseudo, count(*) as gene_count
from apidbtuning.organismattributes oa, apidbtuning.geneattributes ga
where oa.component_taxon_id = ga.taxon_id
and oa.project_id = ga.project_id
group by oa.project_id, oa.source_id, ga.gene_type, ga.is_pseudo
order by source_id, count(*) desc
            ]]>
            </sql>
        </sqlQuery> 


   </querySet>
</wdkModel>

<wdkModel>

    <querySet name="AssemblyAttributes" queryType="attribute" isCacheable="false" excludeProjects="TrichDB,CryptoDB">

      <defaultTestParamValues includeProjects="PlasmoDB,EuPathDB">
         <paramValue name="source_id">PfDT.489225.tmp</paramValue>
         <paramValue name="project_id">PlasmoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="ToxoDB" minRows="0">
         <paramValue name="source_id">NcDT.312941.tmp</paramValue>
         <paramValue name="project_id">ToxoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="CryptoDB">
         <paramValue name="source_id">CpDT.322688.tmp</paramValue>
         <paramValue name="project_id">CryptoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="GiardiaDB">
         <paramValue name="source_id">GlDT.157066.tmp</paramValue>
         <paramValue name="project_id">GiardiaDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="TriTrypDB">
         <paramValue name="source_id">Tb927DT.110744.tmp</paramValue>
         <paramValue name="project_id">TriTrypDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="AmoebaDB">
         <paramValue name="source_id">EhDT.162188.tmp</paramValue>
         <paramValue name="project_id">AmoebaDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="MicrosporidiaDB">
         <paramValue name="source_id">EcDT.160512.tmp</paramValue>
         <paramValue name="project_id">MicrosporidiaDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="FungiDB,HostDB,SchistoDB,InitDB,PiroplasmaDB">
         <paramValue name="source_id"></paramValue>
         <paramValue name="project_id"></paramValue>
      </defaultTestParamValues>


      <testRowCountSql excludeProjects="EuPathDB">
         select count(*) from dots.assembly
      </testRowCountSql>

       <testRowCountSql includeProjects="EuPathDB">
	 SELECT count(*) FROM ApidbTuning.AssemblyAttributes
       </testRowCountSql>


        <sqlQuery name="Bfmv">
        <column name="project_id" />
        <column name="source_id" />
        <column name="organism_text"   ignoreCase="true"/>
        <column name="formatted_organism"  sortingColumn="organism_text" ignoreCase="true"/>
        <column name="est_count"  />
        <column name="length" />
        <column name="a_count" />
        <column name="t_count" />
        <column name="c_count" />
        <column name="g_count" />
        <column name="other_count" />
<!--     <sql includeProjects="ToxoDB">
      <![CDATA[ 
      SELECT aa.source_id, aa.project_id,
      REPLACE(SUBSTR(aa.organism, 1,   40),'Toxoplasma','T.') AS organism,
 '<i>' || SUBSTR(aa.organism, 1, 1) || '.' ||
                  REGEXP_REPLACE(SUBSTR(aa.organism, INSTR(aa.organism, ' ')), '[[:space:]]+',
                                 chr(38) || 'nbsp;') || '</i>'
                    AS formatted_organism,
      aa.est_count, aa.length, aa.a_count, aa.t_count, aa.g_count,aa.c_count,aa.other_count
      FROM  ApidbTuning.AssemblyAttributes aa
     ]]>
    </sql>
-->
     <sql>
      <![CDATA[ 
      SELECT aa.source_id, aa.project_id,
      REPLACE(
        REPLACE(
         REPLACE(
          REPLACE(
            REPLACE(aa.organism,'Cryptosporidium','C.' ),
                                'Giardia',        'G.' ),
                                'Toxoplasma',        'T.' ),
                                'Plasmodium',        'P.' ),
                                'Trichomonas',    'T.' ) AS organism_text,
 '<i>' || SUBSTR(aa.organism, 1, 1) || '.' ||
                  REGEXP_REPLACE(SUBSTR(aa.organism, INSTR(aa.organism, ' ')), '[[:space:]]+',
                                 chr(38) || 'nbsp;') || '</i>'
                    AS formatted_organism,
      aa.est_count, aa.length, aa.a_count, aa.t_count, aa.g_count,aa.c_count,aa.other_count
      FROM  ApidbTuning.AssemblyAttributes aa
     ]]>
    </sql>
    </sqlQuery>


       <sqlQuery name="Sequence">
        <column name="project_id"/>
        <column name="source_id"/>
        <column name="sequence"/>
     <sql>
      <![CDATA[ 
         SELECT source_id, project_id, sequence
         FROM   ApidbTuning.AssemblySequence
     ]]>
    </sql>
 <sql includeProjects="EuPathDB">
                <![CDATA[
                SELECT ens.source_id, ens.sequence,
                       '@PROJECT_ID@' as project_id
                FROM dots.ExternalNaSequence ens, sres.SequenceOntology so
                WHERE so.term_name = 'assembly'
                  AND so.sequence_ontology_id = ens.sequence_ontology_id
                ]]>
           </sql>
    </sqlQuery>


    </querySet>

</wdkModel>

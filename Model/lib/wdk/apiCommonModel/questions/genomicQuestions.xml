<wdkModel>

  <questionSet name="GenomicSequenceQuestions" displayName="Search for Genomic Sequences">

    <!-- ************************************************************ -->
    <!-- SourceId -->  
    <!-- ************************************************************ -->
    
    <question name="SequenceBySourceId"
      searchCategory="Other Attributes"
      displayName="Genomic Sequence ID(s)"
      shortDisplayName="Gen Seq IDs"
      queryRef="SequenceIds.SequenceBySourceId"
      recordClassRef="SequenceRecordClasses.SequenceRecordClass"
      noSummaryOnSingleRecord="true" excludeProjects="EuPathDB">
         
      <attributesList 
        summary="organism, input_id"
      />
      
      <summary>
        Find genomic sequences by ID.
      </summary>

      <description includeProjects="CryptoDB,GiardiaDB,TrichDB,TriTrypDB,AmoebaDB,MicrosporidiaDB,FungiDB,HostDB,SchistoDB,InitDB,PiroplasmaDB">
        Find genomic sequences (contigs) by ID. Either enter the ID list manually, 
           or upload a file that contains the list. IDs can be delimited by a comma, 
           a semicolon, or any white spaces. 
      </description>
      <description includeProjects="ToxoDB">
        Find genomic sequences (chromosomes or scaffolds) by ID. Either enter the ID list manually, 
           or upload a file that contains the list. IDs can be delimited by a comma, 
           a semicolon, or any white spaces. 
      </description>
      <description includeProjects="PlasmoDB">
        Find genomic sequences (chromosomes or contigs) by ID. Either enter the ID list manually, 
           or upload a file that contains the list. IDs can be delimited by a comma, 
           a semicolon, or any white spaces. 
      </description>

      <dynamicAttributes>
	<columnAttribute name="input_id" displayName="Input ID" inReportMaker="true"/>
      </dynamicAttributes>

    </question>
    
    <question name="SequenceBySourceId"
      searchCategory="Other Attributes"
      displayName="Genomic Sequence ID"
      shortDisplayName="ID"
      queryRef="SequenceIds.SequenceBySourceId"
      recordClassRef="SequenceRecordClasses.SequenceRecordClass"
      noSummaryOnSingleRecord="false" includeProjects="EuPathDB">
         
      <attributesList excludeProjects="GiardiaDB" 
        summary="organism,formatted_length,chromosome"
      />
      
      <attributesList includeProjects="GiardiaDB" 
        summary="organism,formatted_length"
      />
      
      <summary>
        Find genomic sequences by ID.
      </summary>

      <description>
        Find genomic sequences (chromosomes or contigs) by ID. Either enter the ID list manually, 
           or upload a file that contains the list. IDs can be delimited by a comma, 
           a semicolon, or any white spaces. Also, the list may contain gene IDs from any of the EuPathDB organisms.  For example, a list can be in the
           following form: "TGME49_chrIa, Pf3D7_04_v3, AAEE01000006"
      </description>
    
    </question>
    
    
    <!-- ************************************************************ -->
    <!-- Species -->  
    <!-- ************************************************************ -->
    
    <question name="SequencesByTaxon"
      searchCategory=""
      displayName="Organism"
      shortDisplayName="Organism"
      queryRef="SequenceIds.SequencesByTaxon"
      recordClassRef="SequenceRecordClasses.SequenceRecordClass">
      
      <attributesList excludeProjects="EuPathDB,GiardiaDB" 
        summary="organism,formatted_length,chromosome"
        sorting="formatted_length desc"
      />
       <attributesList includeProjects="GiardiaDB" 
        summary="organism,formatted_length"
        sorting="organism asc,formatted_length desc"
      />
       <attributesList includeProjects="EuPathDB" 
        summary="organism,formatted_length,chromosome"
        sorting="organism asc,formatted_length desc"
      />
      
      <summary>
        Find genomic sequences of a species.
      </summary>

      <description includeProjects="CryptoDB,GiardiaDB,TrichDB,AmoebaDB,MicrosporidiaDB,FungiDB,HostDB,SchistoDB,InitDB,PiroplasmaDB">
        Find genomic sequences (contigs) for one or more species.
      </description>
      <description includeProjects="PlasmoDB,ToxoDB,EuPathDB,TriTrypDB">
        Find genomic sequences (chromosomes or contigs) for one or more species.
      </description>



    </question>
    
    
    <!-- ************************************************************ -->
    <!-- Similarity -->  
    <!-- ************************************************************ -->
  
    <question name="SequencesBySimilarity"
      searchCategory="Similarity/Pattern"
      displayName="BLAST"
      shortDisplayName="BLAST"
      queryRef="SequenceIds.SequencesBySimilarity"
      recordClassRef="SequenceRecordClasses.SequenceRecordClass"
      customJavascript="blast.js"
      fullAnswer="true">
      
      <attributesList 
         summary="primary_key,organism,score,evalue"
         sorting="score desc"
      />
      
      <summary>
        Find genomic sequences that have BLAST similarity to your input sequence.
      </summary>
      <description>
        <![CDATA[
 As of 3 Feb 2014, this search uses NCBI-BLAST to determine sequence similarity. 
			Prior versions of the search used WU-BLAST.
		  <a target="_blank" href="http://www.ncbi.nlm.nih.gov/blast/Blast.cgi?CMD=Web&PAGE_TYPE=BlastDocs">NCBI-BLAST help.</a>
        ]]>
      </description>
     

         <summaryView name="blast-view" display="BLAST" default="true"
                      jsp="/wdkCustomization/jsp/results/blast-view.jsp"
                      handlerClass="org.eupathdb.common.model.view.BlastSummaryViewHandler" />

         <dynamicAttributes>
             <columnAttribute name="evalue_mant" internal="true" inReportMaker="false"/>
             <columnAttribute name="evalue_exp" internal="true" inReportMaker="false"/> 
             <columnAttribute name="score" displayName="Score" />
             <columnAttribute name="summary" displayName="Summary" internal="true" inReportMaker="false"/>
             <columnAttribute name="alignment" displayName="Alignment" internal="true" inReportMaker="false"/>
             <textAttribute name="evalue" displayName="E-Value"> 
                <text>                   
                   <![CDATA[ $$evalue_mant$$E$$evalue_exp$$ ]]>                               
                </text>                                                                                          
             </textAttribute>
         
         </dynamicAttributes>

	 <propertyList name="websiteProperties">
            <value>hideTitle</value>
        </propertyList>

  
    </question>
    
  


     <question name="SequenceByWeightFilter"
              shortDisplayName="Weight"
              displayName="Filter by Weight"
              queryRef="SequenceIds.ByWeightFilter"
              recordClassRef="SequenceRecordClasses.SequenceRecordClass">
        <attributesList
           summary="wdk_weight"
        />
        <description>
           <![CDATA[
            Filter away results that have a weight outside the specified range.  
            (This transform is only useful if the input result sets have used weights)
          ]]>
        </description>
    </question>

    <question name="SequencesByPloidy"
              shortDisplayName="Ploidy"
              displayName="Copy Number/Ploidy"
              queryRef="SequenceIds.ByCopyNumber"
              recordClassRef="SequenceRecordClasses.SequenceRecordClass"
              includeProjects="TriTrypDB">
          <attributesList
                summary="strain,ploidy"
                sorting="ploidy desc"/> 
          <summary>
          Find genomic sequences or chromosomes based on the number of copies in the genome.</summary>
          <description>
            <![CDATA[
                Find genomic sequences or chromosomes based on their estimated copy number in 
                a resequenced strain.<br><br>  
                
                Whole genome resequencing data was used to estimate the copy number (ploidy) of 
                genomic sequences in the resequenced strains. This search returns genomic sequences or 
                chromosomes with the estimated copy number that you specify. For example, searching for 
                genomic sequences with copy number >= 3 finds 
                trisomic genomic sequences or chromsomes. <br><br>
                
                
                Begin by choosing an Organism (reference genome) and a Resequenced Strain.  Then enter a value 
                for Copy Number and initiate the 
                search by clicking the GET ANSWER button.  Genomic sequences returned by the search will have an estimated  
                copy number greater than or equal to the value you entered for the Copy Number. For example, to find
                supernumerary chromosomes in a diploid organism, search for genomic sequences where the Copy Number is >= 3.<br>
            ]]>
          </description>
          <dynamicAttributes>
            <columnAttribute name="ploidy" displayName="Estimated Copy No" inReportMaker="true" />
            <columnAttribute name="strain" displayName="Resequenced Strain" inReportMaker="true" />
          </dynamicAttributes> 
    </question>

  </questionSet>


  <!--===========================================================================-->
  <!--===========================================================================-->
  <!-- Gene Data Dump questions (internal)  -->
  <!--===========================================================================-->
  <!--===========================================================================-->

  <questionSet name="SequenceDumpQuestions" excludeProjects="EuPathDB"
             displayName="Genomic Sequence Data Dump Questions"
             internal="true">

  <!--===========================================================================-->
  <!-- question that retrieves all genomic sequences by organism  -->
  <!--===========================================================================-->
    <question name="SequenceDumpQuestion" excludeProjects="EuPathDB"
         displayName="Find Sequences to dump"
              shortDisplayName="Seq. to dump"
              queryRef="SequenceIds.SequenceDumpQuery"
              recordClassRef="SequenceRecordClasses.SequenceRecordClass">
        <description>Find all sequences to by organisms</description>
    </question>


  <!--===========================================================================-->
  <!-- question that retrieves all primary genomic sequences  by organism  -->
  <!--===========================================================================-->
    <question name="ExternalSequenceDumpQuery" excludeProjects="EuPathDB"
         displayName="Find Primary Sequences to dump"
              shortDisplayName="Primary Seq. to dump"
              queryRef="SequenceIds.ExternalSequenceDumpQuery"
              recordClassRef="SequenceRecordClasses.SequenceRecordClass">
        <description>Find all primary sequences to by organisms</description>
    </question>




  </questionSet>
</wdkModel>

<wdkModel>

<querySet name="SpanId" queryType="id">

    <!-- ************************************************************ -->
    <!-- SourceId -->  
    <!-- ************************************************************ -->
 
    <sqlQuery name="DynSpansBySourceId" doNotTest="true" excludeProjects="EuPathDB"
        isCacheable="true">
        <paramRef ref="SpanParams.sequenceId" default="TGME49_chrIa:10000-20000:0" includeProjects="ToxoDB"/> 
        <paramRef ref="SpanParams.sequenceId" default="Pf3D7_04:10000-20000:0" includeProjects="PlasmoDB"/> 
        <paramRef ref="SpanParams.sequenceId" excludeProjects="ToxoDB,PlasmoDB"/> 
        <column name="source_id"/>
        <column name="project_id"/>

        <sql>
        <![CDATA[
            SELECT DISTINCT t.source_id,'@PROJECT_ID@' as project_id
 
             FROM (SELECT DISTINCT ds.source_id
                  FROM ($$sequenceId$$) ds
                  ) t
 
           GROUP BY t.source_id


           ]]>
        </sql>
    </sqlQuery>



 <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
  <!-- Location :   for eupath this sql needs to get the project from the apidb.sequenceattribute table  -->
  <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->



   <sqlQuery name="DynSpansByLocation"
              isCacheable="true" doNotTest="true">
        <paramRef ref="sharedParams.sequenceId"/>
        <paramRef ref="sharedParams.start_point"/>
        <paramRef ref="sharedParams.end_point"/>
        <column name="project_id"/>
        <column name="source_id" width="50"/>
        <sql>
            <![CDATA[
            SELECT 
              $$sequenceId$$ || ':' || $$start_point$$  || '-' || $$end_point$$ || ':0' 
                  as source_id,  '@PROJECT_ID@' as project_id
           FROM dual

           ]]>
       </sql>
    </sqlQuery>

    <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- Motif search -->
    <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

    <processQuery name="DynSpansByMotifSearch" excludeProjects="EuPathDB"
             processName="org.apidb.apicomplexa.wsfplugin.motifsearch.MotifSearchPlugin">
       <paramRef ref="sharedParams.motif_expression" default="TGTTTATAAATATG" noTranslation="true"/>
       <paramRef ref="genomicSimilarityParams.dnamotif_organism" quote="false" />
       <wsColumn name="source_id" width="50" wsName="GeneID"/>
       <wsColumn name="project_id" width="32" wsName="ProjectId"/>
       <wsColumn name="Locations" width="3999"/>
       <wsColumn name="MatchCount" width="15"/>
       <wsColumn name="Sequence" width="3999"/>
    </processQuery>

    
    <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- span logic - genes and orfs -->
    <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

    <processQuery name="RecordsBySpanLogic" isCacheable="true" doNotTest="true" local="true"
                   processName="org.apidb.apicomplexa.wsfplugin.spanlogic.SpanCompositionPlugin">
        <paramRef ref="SpanParams.span_operation"/>
        <paramRef ref="SpanParams.span_strand"/>
        <paramRef ref="SpanParams.span_output"/>
        <paramRef ref="SpanParams.span_a"/>
        <paramRef ref="SpanParams.span_begin_a"/>
        <paramRef ref="SpanParams.span_begin_direction_a"/>
        <paramRef ref="SpanParams.span_begin_offset_a"/>
        <paramRef ref="SpanParams.span_b"/>
        <paramRef ref="SpanParams.span_begin_b"/>
        <paramRef ref="SpanParams.span_begin_direction_b"/>
        <paramRef ref="SpanParams.span_begin_offset_b"/>
        <wsColumn name="project_id" width="32"/>
        <wsColumn name="source_id" width="32"/>
        <wsColumn name="wdk_weight" width="12" columnType="number"/>
    </processQuery>

</querySet>

</wdkModel>


<wdkModel>
  <querySet name="CompoundIds" queryType="id"
	    includeProjects="PlasmoDB,EuPathDB">

    <!-- ************************************************************ -->
    <!-- Compound Id -->  
    <!-- ************************************************************ -->
 
    <sqlQuery name="CompoundsByCompoundID" doNotTest="true"  excludeProjects="EuPathDB"
              displayName="ID" isCacheable="true">
        <paramRef ref="compoundParams.pubchem_compound_id"/>
        <column name="project_id"/>
        <column name="source_id"/>
        <sql>
            <![CDATA[
            SELECT DISTINCT compound_id as source_id,'@PROJECT_ID@' as project_id
              FROM ApiDB.PubChemCompound
	      WHERE compound_id LIKE REGEXP_REPLACE(REPLACE( $$pubchem_compound_id$$, '*', '%'), '[[:space:]]', '')

               ]]>
        </sql>
    </sqlQuery>

    <processQuery name="CompoundsByCompoundID" includeProjects="EuPathDB"
          isCacheable='true' doNotTest="true"
          processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin"> 
        <paramRef ref="compoundParams.pubchem_compound_id" noTranslation="true"/>
        <wsColumn name="source_id" width="50" wsName="source_id"/>
        <wsColumn name="project_id" width="32" wsName="project_id"/>
    </processQuery>   



    <!-- ************************************************************ -->
    <!-- Compound By Gene ID -->  
    <!-- ************************************************************ -->
 
    <sqlQuery name="CompoundsByGeneID" doNotTest="true"  excludeProjects="EuPathDB"
              displayName="ID by gene" isCacheable="true">

      <paramRef ref="estParams.single_gene_id"/>
      <column name="project_id"/>
      <column name="source_id"/>
      <column name="compound"/>
      <column name="enzyme"/>

      <sql>
	<![CDATA[
            SELECT DISTINCT pc.pubchem_compound_id as source_id, pc.compound, pc.enzyme, --s.substance_id, 
                   '@PROJECT_ID@' as project_id
	    FROM apidbtuning.PathwayCompounds pc, apidb.pubchemsubstance s
            WHERE lower(gene_id) LIKE REGEXP_REPLACE(REPLACE(LOWER($$single_gene_id$$), '*', '%'),'[[:space:]]', '')
            AND s.property='CID' 
	    AND s.value =to_char( pubchem_compound_id )
                                               
	    ]]>
        </sql>
    </sqlQuery>

    <processQuery name="CompoundsByGeneID" includeProjects="EuPathDB"
		  isCacheable='true' doNotTest="true"
		  processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin"> 
      <paramRef ref="estParams.single_gene_id" noTranslation="true"/>
      <wsColumn name="source_id" width="50" wsName="source_id"/>
      <wsColumn name="project_id" width="32" wsName="project_id"/>
      <wsColumn name="compound" width="32"/>   
      <wsColumn name="enzyme" width="32"/>   
    </processQuery>   

   </querySet>


</wdkModel>

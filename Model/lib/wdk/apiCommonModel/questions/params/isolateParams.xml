<wdkModel>

  <!-- notes

     - should ms_assay param be a controlled vocab pulled from the database?

  -->

  <paramSet name="isolateParams" includeProjects="CryptoDB,PlasmoDB,ToxoDB,GiardiaDB,EuPathDB">

    <!--++++++++++++++++++++++++++++++++++++++++++++++++-->
    <!-- ID -->
    <!--++++++++++++++++++++++++++++++++++++++++++++++++-->
        <datasetParam name="isolate_id" prompt="Isolate ID" 
                      recordClassRef="IsolateRecordClasses.IsolateRecordClass"
                      includeProjects="CryptoDB,PlasmoDB,ToxoDB,GiardiaDB,EuPathDB">
            <help>Input a comma delimited set of  Isolate IDs, or upload a file. Wildcards (*) are allowed.</help>
            <suggest includeProjects="CryptoDB"
                     sample="AF527841, DQ1145002, DQ115*"
                     default="AF527841"/>
            <suggest includeProjects="PlasmoDB"
                     sample="FJ490884, CPHD.911318"
                     default="FJ490884, CPHD.911318"/>
            <suggest includeProjects="ToxoDB"
                     sample="EF639858,AF378312"
                     default="EF639858,AF378312"/>
            <suggest includeProjects="GiardiaDB"
                     sample="EU815931, AF176672"
                     default="EU815931, AF176672"/>
           <suggest includeProjects="EuPathDB" 
                     sample="AF527841, DQ1145002, DQ115*"
                     default="AF527841"/>
         </datasetParam>

        <stringParam name="gene_id" prompt="Gene Name">
            <help>Enter an Gene Name.  Wildcards (*) are allowed.</help>
            <suggest includeProjects="CryptoDB,PlasmoDB,EuPathDB,ToxoDB"
                     sample="cgd5_3160, cgd5_31*, *"
                     default="cgd5_3160"/>
        </stringParam>

        <stringParam name="author" prompt="Author/Submitter">
            <help>Enter an Author name.  Wildcards (*) are allowed.</help> 
            <suggest includeProjects="CryptoDB,PlasmoDB,ToxoDB,GiardiaDB,EuPathDB" sample="Xiao" default="Xiao"/> 
        </stringParam>

        <flatVocabParam name="isolate_organism" includeProjects="CryptoDB,PlasmoDB,ToxoDB,GiardiaDB,EuPathDB"
             queryRef="organismIQ.withIsolates"
            prompt="Organism"
            multiPick="true"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="specific_host" includeProjects="CryptoDB,PlasmoDB,EuPathDB,ToxoDB,GiardiaDB"
             queryRef="hostVQ.withIsolates"
             default="Mammals - human"
             prompt="Host"
             multiPick="true"
             quote="false"
             displayType="treeBox">
             <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="isolation_source" includeProjects="CryptoDB,PlasmoDB,ToxoDB,GiardiaDB,EuPathDB"
             queryRef="isolationSourceVQ.withIsolates"
             prompt="Isolation Source"
             multiPick="true"
             quote="false">
             <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="product" includeProjects="CryptoDB,PlasmoDB,ToxoDB,GiardiaDB,EuPathDB"
            queryRef="productVQ.withIsolates"
            prompt="Product Name"
            quote="false"
            displayType="typeAhead">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="genotype" includeProjects="ToxoDB,EuPathDB"
            queryRef="genotypeVQ.withIsolates"
            prompt="Genotype #"
            multiPick="true"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="rflp_protein_SAG1" includeProjects="ToxoDB,EuPathDB"
            queryRef="rflpGenotypeVQ.SAG1"
            prompt="Protein SAG1"
            multiPick="false"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="rflp_protein_53_SAG2" includeProjects="ToxoDB,EuPathDB"
            queryRef="rflpGenotypeVQ.I-II-III-nd"
            prompt="5'+3' SAG2"
            multiPick="false"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="rflp_protein_alt_SAG2" includeProjects="ToxoDB,EuPathDB"
            queryRef="rflpGenotypeVQ.I-II-III-nd"
            prompt="alt. SAG2"
            multiPick="false"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="rflp_protein_SAG3" includeProjects="ToxoDB,EuPathDB"
            queryRef="rflpGenotypeVQ.I-II-III"
            prompt="SAG3"
            multiPick="false"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="rflp_protein_BTUB" includeProjects="ToxoDB,EuPathDB"
            queryRef="rflpGenotypeVQ.I-II-III"
            prompt="BTUB"
            multiPick="false"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="rflp_protein_GRA6" includeProjects="ToxoDB,EuPathDB"
            queryRef="rflpGenotypeVQ.I-II-III"
            prompt="GRA6"
            multiPick="false"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="rflp_protein_c22-8" includeProjects="ToxoDB,EuPathDB"
            queryRef="rflpGenotypeVQ.c22-8"
            prompt="c22-8"
            multiPick="false"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="rflp_protein_c29-2" includeProjects="ToxoDB,EuPathDB"
            queryRef="rflpGenotypeVQ.c29-2"
            prompt="c29-2"
            multiPick="false"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="rflp_protein_L358" includeProjects="ToxoDB,EuPathDB"
            queryRef="rflpGenotypeVQ.I-II-III"
            prompt="L358"
            multiPick="false"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam> 

        <flatVocabParam name="rflp_protein_PK1" includeProjects="ToxoDB,EuPathDB"
            queryRef="rflpGenotypeVQ.PK1"
            prompt="PK1"
            multiPick="false"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam> 

        <flatVocabParam name="rflp_protein_Apico" includeProjects="ToxoDB,EuPathDB"
            queryRef="rflpGenotypeVQ.I-II-III-nd"
            prompt="Apico"
            multiPick="false"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="study" includeProjects="CryptoDB,PlasmoDB,EuPathDB,GiardiaDB,ToxoDB"
            queryRef="studyVQ.withIsolates"
            prompt="Study Name"
            multiPick="true"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam>

        <flatVocabParam name="country" includeProjects="CryptoDB,PlasmoDB,ToxoDB,GiardiaDB,EuPathDB"
            queryRef="countryVQ.withIsolates"
            prompt="Geographic Locations"
            default="Unknown"
            multiPick="true"
            quote="false"
            displayType="treeBox">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
            <suggest selectMode="all" />
        </flatVocabParam>

        <flatVocabParam name="continent" includeProjects="CryptoDB,PlasmoDB,EuPathDB"
            queryRef="continentVQ.withIsolates"
            prompt="Continent Name"
            default="--None--"
            multiPick="true"
            quote="false">
            <useTermOnly value="true" includeProjects="EuPathDB"/>
        </flatVocabParam> 

        <flatVocabParam name="strain" includeProjects="CryptoDB,PlasmoDB,ToxoDB,GiardiaDB,EuPathDB"
            queryRef="strainVQ.withIsolates"
            prompt="Species/Strain Name"
            multiPick="true"
            quote="false"
            displayType="treeBox">
                  <help>
                         Species Name (and strain if appropriate)
                        </help>
            <useTermOnly value="true" includeProjects="EuPathDB"/>
            <suggest selectMode="all" />
       </flatVocabParam>

       <flatVocabParam name="type" includeProjects="PlasmoDB,ToxoDB,CryptoDB,GiardiaDB,EuPathDB"
            queryRef="typeVQ.withIsolates"
            prompt="Isolate assay type"
            multiPick="true"
            quote="true"> 
        <help>
          Choose the isolate type you want to query
            </help>
        <useTermOnly value="true" includeProjects="EuPathDB"/> 
        <suggest selectMode="all" />
       </flatVocabParam>

       <flatVocabParam name="snp_assay_type" includeProjects="PlasmoDB,EuPathDB"
            queryRef="typeVQ.snps_only"
            prompt="Isolate assay type"
            multiPick="true"
            quote="true"> 
        <help>
          Choose the isolate type you want to query
            </help>
        <useTermOnly value="true" includeProjects="EuPathDB"/> 
       </flatVocabParam>

<!-- Now redundant. See the prtinent question for more information

       <flatVocabParam name="submitter" includeProjects="PlasmoDB,EuPathDB"
            queryRef="submitterVQ.withIsolates"
            prompt="Submitter"
            multiPick="true"
            quote="false"> 
                        <help>
                          Search isolates by submitter name.
                        </help>
            <useTermOnly value="true" includeProjects="EuPathDB"/> 
       </flatVocabParam>
-->
       <enumParam name="text_fields"
                  prompt="Fields"
                  multiPick="true">
         <help>
             Choose which text fields to search.
         </help>
         <useTermOnly value="true" includeProjects="EuPathDB"/>
         <enumList>
           <enumValue>
             <term>Organism</term>
             <internal>organism</internal>
           </enumValue>
           <enumValue>
             <term>Description</term>
             <internal>description</internal>
           </enumValue>
           <enumValue>
             <term>Product</term>
             <internal>product</internal>
           </enumValue>
           <enumValue>
             <term>Strain</term>
             <internal>strain</internal>
           </enumValue>
           <enumValue>
             <term>Host</term>
             <internal>host</internal>
           </enumValue>
           <enumValue>
             <term>Note</term>
             <internal>note</internal>
           </enumValue>
           <enumValue>
             <term>Isolation Source</term>
             <internal>isolation_source</internal>
           </enumValue>
           <enumValue>
             <term>Geographic Location</term>
             <internal>geographic_location</internal>
           </enumValue>
           <enumValue>
             <term>Reference</term>
             <internal>Reference</internal>
           </enumValue>
           <enumValue>
             <term>Gene overlap</term>
             <internal>GeneOverlap</internal>
           </enumValue>
         </enumList>
       </enumParam>

    </paramSet>

    <querySet name="organismIQ" queryType="vocab">
      <sqlQuery name="withIsolates" includeProjects="CryptoDB,PlasmoDB,ToxoDB,GiardiaDB">
      <column name="internal"/>
      <column name="term"/>
      <sql>
      <![CDATA[
      SELECT src.organism || '  - (' || count(src.organism) || ' isolates)' AS term,
             src.organism AS internal
      FROM   DoTS.IsolateSource src,
             DoTS.ExternalNASequence etn
      WHERE  src.na_sequence_id = etn.na_sequence_id
         AND src.organism is not null
      GROUP BY src.organism
      ORDER BY src.organism
     ]]>
      </sql>
    </sqlQuery>

    <processQuery name="withIsolates" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="200" wsName="internal"/>
      <wsColumn name="term" width="200" wsName="term"/>
    </processQuery>

  </querySet>

  <querySet name="hostVQ" queryType="vocab">
    <sqlQuery name="withIsolates" includeProjects="CryptoDB,PlasmoDB,GiardiaDB,ToxoDB">
    <column name="internal"/>
    <column name="term"/>
    <column name="parentTerm"/>
    <sql>
    <![CDATA[
 select distinct initcap(v.term) as term, initcap(v.term) as internal, initcap(v.parent) as parentTerm
 from   apidb.isolatevocabulary v, apidb.isolatemapping m
 where  v.type = 'specific_host'
 and   v.isolate_vocabulary_id = m.isolate_vocabulary_id
 union
 select distinct initcap(v.parent) as term, initcap(v.parent) as internal, ''  as parentterm 
 from   apidb.isolatevocabulary v, apidb.isolatemapping m
 where  v.type = 'specific_host' 
 and    v.isolate_vocabulary_id = m.isolate_vocabulary_id
 and v.parent is not null 
 union
 select 'Unknown' as term, 'Unknown' as internal, '' as parentTerm from dual
]]>
 <!--
select v.term, v.term as internal, p.parent as parentTerm
 from (select term as term, original_term as original_term from apidb.isolatevocabulary where type = 'specific_host') v,
      (select term as term, parent as parent from apidb.isolatevocabulary where source = 'isolate vocabulary' and type = 'specific_host') p, 
      (select distinct trim(specific_host) as specific_host from apidb.isolateattributes) c
 where v.term = p.term
 and trim(v.original_term) = c.specific_host
 union
 select 'Reptiles' as term, 'Reptiles' as internal, '' as parentterm from dual
 union
 select 'Mammals - non human' as term, 'Mammals - non human' as internal, '' as parentterm from dual
 union
 select 'Mammals - human' as term, 'Mammals - human' as internal, '' as parentterm from dual
 union
 select 'Amphibians' as term, 'Amphibians' as internal, '' as parentterm from dual
 union
 select 'Mollusks' as term, 'Mollusks' as internal, '' as parentterm from dual
 union
 select 'Birds' as term, 'Birds' as internal, '' as parentterm from dual
 union
 select 'marsupial' as term, 'marsupial' as internal, 'Mammals - non human' as parentterm from dual
 union
 select 'rodent' as term, 'rodent' as internal, 'Mammals - non human' as parentterm from dual
 union
 select 'Unknown' as term, 'Unknown' as internal, '' as parentterm from dual
    ]]>
-->
    </sql>
    </sqlQuery>

    <processQuery name="withIsolates" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="100" wsName="internal"/>
      <wsColumn name="term" width="100" wsName="term"/>
      <wsColumn name="parentTerm" width="200" wsName="parentTerm"/>
    </processQuery>

    </querySet>

  <querySet name="isolationSourceVQ" queryType="vocab">
    <sqlQuery name="withIsolates" includeProjects="CryptoDB,ToxoDB,PlasmoDB,GiardiaDB">
    <column name="term"/>
    <column name="internal"/>
    <sql>
    <![CDATA[
select distinct initcap(v.term) as term, v.term as internal
from apidb.isolatevocabulary v, apidb.isolatemapping m 
where v.type = 'isolation_source'
and   v.isolate_vocabulary_id = m.isolate_vocabulary_id
order by v.term asc
    ]]>
    </sql>
    </sqlQuery>

    <processQuery name="withIsolates" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="200" wsName="internal"/>
      <wsColumn name="term" width="200" wsName="term"/>
    </processQuery>

    </querySet>

  <querySet name="productVQ" queryType="vocab">
    <sqlQuery name="withIsolates" includeProjects="CryptoDB,PlasmoDB,ToxoDB,GiardiaDB">
    <column name="display"/>
    <column name="internal"/>
    <column name="term"/>
    <sql>
    <![CDATA[
select distinct CASE WHEN v.parent='RFLP' THEN v.parent || ' - ' || v.term ELSE v.term END AS display, v.term as term, v.term as internal
from apidb.ISOLATEVOCABULARY v, apidb.ISOLATEMAPPING m, apidb.ISOLATEATTRIBUTES ia
where v.type = 'product'
and v.isolate_vocabulary_id = m.isolate_vocabulary_id
and m.na_sequence_id = ia.na_sequence_id
order by v.term
    ]]>
    </sql>
    </sqlQuery>

    <processQuery name="withIsolates" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="100" wsName="internal"/>
      <wsColumn name="term" width="100" wsName="term"/>
      <wsColumn name="parentTerm" width="200" wsName="parentTerm"/>
    </processQuery>

     </querySet>

  <querySet name="genotypeVQ" queryType="vocab">
    <sqlQuery name="withIsolates" includeProjects="ToxoDB">
    <column name="display"/>
    <column name="internal"/>
    <column name="term"/>
    <column name="parentTerm"/>
    <sql>
    <![CDATA[
select distinct 'Genotype #' || v.prediction_number as display, 
      v.prediction_number as term, v.prediction_number as internal, '' as parentTerm
from dots.isolatefeature v 
where name = 'RFLP'
order by v.prediction_number
    ]]>
    </sql>
    </sqlQuery>

    <processQuery name="withIsolates" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="100" wsName="internal"/>
      <wsColumn name="term" width="100" wsName="term"/>
      <wsColumn name="parentTerm" width="200" wsName="parentTerm"/>
    </processQuery>

  </querySet>

  <querySet name="rflpGenotypeVQ" queryType="vocab">

    <sqlQuery name="I-II-III" includeProjects="ToxoDB">
    <column name="internal"/>
    <column name="term"/>
    <sql>
    <![CDATA[
select 'Don''t Care' as term, 'all' as internal
from dual 
union
select distinct v.gene_type as term, v.gene_type as internal
from dots.isolatefeature v 
where v.name = 'RFLP'
and v.product = 'BTUB'
    ]]>
    </sql>
    </sqlQuery>
		
    <sqlQuery name="I-II-III-nd" includeProjects="ToxoDB">
    <column name="internal"/>
    <column name="term"/>
    <sql>
    <![CDATA[
select 'Don''t Care' as term, 'all' as internal
from dual 
union
select distinct v.gene_type as term, v.gene_type as internal
from dots.isolatefeature v 
where v.name = 'RFLP'
and v.product = 'Apico'
    ]]>
    </sql>
    </sqlQuery>

    <sqlQuery name="c29-2" includeProjects="ToxoDB">
    <column name="internal"/>
    <column name="term"/>
    <sql>
    <![CDATA[
select 'Don''t Care' as term, 'all' as internal
from dual 
union
select distinct v.gene_type as term, v.gene_type as internal
from dots.isolatefeature v 
where v.name = 'RFLP'
and v.product = 'c29-2'
    ]]>
    </sql>
    </sqlQuery>

    <sqlQuery name="c22-8" includeProjects="ToxoDB">
    <column name="internal"/>
    <column name="term"/>
    <sql>
    <![CDATA[
select 'Don''t Care' as term, 'all' as internal
from dual 
union
select distinct v.gene_type as term, v.gene_type as internal
from dots.isolatefeature v 
where v.name = 'RFLP'
and v.product = 'c22-8'
    ]]>
    </sql>
    </sqlQuery>

    <sqlQuery name="PK1" includeProjects="ToxoDB">
    <column name="internal"/>
    <column name="term"/>
    <sql>
    <![CDATA[
select 'Don''t Care' as term, 'all' as internal
from dual 
union
select distinct v.gene_type as term, v.gene_type as internal
from dots.isolatefeature v 
where v.name = 'RFLP'
and v.product = 'PK1'
    ]]>
    </sql>
    </sqlQuery>

    <sqlQuery name="SAG1" includeProjects="ToxoDB">
    <column name="internal"/>
    <column name="term"/>
    <sql>
    <![CDATA[
select 'Don''t Care' as term, 'all' as internal
from dual 
union
select distinct v.gene_type as term, v.gene_type as internal
from dots.isolatefeature v 
where v.name = 'RFLP'
and v.product = 'SAG1'
    ]]>
    </sql>
    </sqlQuery>

    <processQuery name="I-II-III" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="100" wsName="internal"/>
      <wsColumn name="term" width="100" wsName="term"/>
    </processQuery>

    <processQuery name="I-II-III-nd" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="100" wsName="internal"/>
      <wsColumn name="term" width="100" wsName="term"/>
    </processQuery>

    <processQuery name="c29-2" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="100" wsName="internal"/>
      <wsColumn name="term" width="100" wsName="term"/>
    </processQuery>
		
    <processQuery name="c22-8" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="100" wsName="internal"/>
      <wsColumn name="term" width="100" wsName="term"/>
    </processQuery>

    <processQuery name="PK1" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="100" wsName="internal"/>
      <wsColumn name="term" width="100" wsName="term"/>
    </processQuery>

    <processQuery name="SAG1" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="100" wsName="internal"/>
      <wsColumn name="term" width="100" wsName="term"/>
    </processQuery>


  </querySet> 

  <querySet name="studyVQ" queryType="vocab">
    <sqlQuery name="withIsolates" includeProjects="CryptoDB,PlasmoDB,ToxoDB,GiardiaDB">
    <column name="internal"/>
    <column name="term"/>
    <sql>
    <![CDATA[
    select distinct apidb.alphanumeric_str(r.title) as term,
                    r.title as internal
    from apidb.isolateattributes ia, dots.nasequenceref sr, sres.reference r
    where ia.na_sequence_id = sr.na_sequence_id
    and r.reference_id = sr.reference_id
    and r.title is not null
    ]]>
    </sql>
    </sqlQuery>

    <processQuery name="withIsolates" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="200" wsName="internal"/>
      <wsColumn name="term" width="200" wsName="term"/>
    </processQuery>

  </querySet>

  <querySet name="countryVQ" queryType="vocab">

    <sqlQuery name="withIsolates" includeProjects="CryptoDB,PlasmoDB,ToxoDB,GiardiaDB">
      <column name="internal"/>
      <column name="term"/>
      <column name="parentTerm"/>

      <sql>
      <![CDATA[
 select distinct initcap(v.term) as term, initcap(v.term) as internal, initcap(v.parent) as parentTerm
 from   apidb.isolatevocabulary v, apidb.isolatemapping m
 where  v.type = 'geographic_location'
 and    v.isolate_vocabulary_id = m.isolate_vocabulary_id
 union
 select distinct initcap(v.parent) as term, initcap(v.parent) as internal, '' as parentterm 
 from   apidb.isolatevocabulary v, apidb.isolatemapping m
 where  v.type = 'geographic_location' 
 and    v.isolate_vocabulary_id = m.isolate_vocabulary_id
 and    parent is not null
 union
 select 'Unknown' as term, 'Unknown' as internal, '' as parentTerm from dual
      ]]>
      </sql>
    </sqlQuery>

 
    <processQuery name="withIsolates" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="200" wsName="internal"/>
      <wsColumn name="term" width="200" wsName="term"/>
      <wsColumn name="parentTerm" width="200" wsName="parentTerm"/>
    </processQuery>

  </querySet>

  <querySet name="continentVQ" queryType="vocab">

     <sqlQuery name="withIsolates" includeProjects="CryptoDB, PlasmoDB">
        <column name="internal"/>
        <column name="term"/>
        <sql>
        <![CDATA[
        SELECT distinct initcap(src.continent) AS term,
               src.continent AS internal
        FROM   ApiDB.Continents src
        WHERE  src.continent is not null
        UNION
        SELECT '--None--' AS term,
               '0' AS internal
        FROM   dual
        ]]> 
     </sql> 
  </sqlQuery>

  <processQuery name="withIsolates" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB"> 
      <wsColumn name="internal" width="200" wsName="internal"/> 
      <wsColumn name="term" width="200" wsName="term"/> 
  </processQuery> 
  </querySet>


  <querySet name="typeVQ" queryType="vocab">
    <sqlQuery name="withIsolates" includeProjects="CryptoDB,ToxoDB,PlasmoDB,GiardiaDB">
      <column name="internal"/>
      <column name="term"/>
      <sql>
      <![CDATA[
      SELECT distinct src.data_type AS term,
             src.data_type AS internal
      FROM   ApiDB.IsolateAttributes src
      ORDER BY src.data_type
      ]]>
      </sql>
    </sqlQuery>

 <processQuery name="withIsolates" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="200" wsName="internal"/>
      <wsColumn name="term" width="200" wsName="term"/>
    </processQuery>

    <sqlQuery name="snps_only" includeProjects="PlasmoDB,EuPathDB">
      <column name="internal"/>
      <column name="term"/>
      <sql>
      <![CDATA[
      SELECT distinct src.data_type AS term,
             src.data_type AS internal
      FROM   ApiDB.IsolateAttributes src
      WHERE  src.data_type != 'Sequencing Typed'
      AND    src.data_type != 'RFLP Typed'
      ORDER BY src.data_type
      ]]>
      </sql>
    </sqlQuery>

  </querySet>

  <querySet name="strainVQ" queryType="vocab">

    <sqlQuery name="withIsolates" includeProjects="CryptoDB,PlasmoDB,ToxoDB,GiardiaDB">
      <column name="internal"/>
      <column name="term"/>
      <column name="parentTerm"/>

<sql includeProjects="CryptoDB">
      <![CDATA[
select distinct i.organism as term, tn.name as internal, p.name as parentTerm 
from apidb.isolateattributes i, sres.taxonname tn, 
     sres.taxon t, sres.TaxonName p
where i.organism = tn.name
and tn.taxon_id = t.taxon_id
and tn.name_class = 'scientific name'
and t.parent_id = p.taxon_id
and p.name_class =  'scientific name'
--union
--select 'Cryptosporidium' as term, 'Cryptosporidium' as internal, '' as parentTerm from dual
union
select 'unclassified Cryptosporidium' as term, 'unclassified Cryptosporidium' as internal, 'Cryptosporidium' as parentTerm from dual
union
select 'environmental samples' as term, 'environmental samples' as internal, 'Cryptosporidium' as parentTerm from dual
     ]]>
      </sql>

      <sql  includeProjects="PlasmoDB">
      <![CDATA[
select distinct i.organism as term, tn.name as internal, p.name as parentTerm 
from apidb.isolateattributes i, sres.taxonname tn, 
     sres.taxon t, sres.TaxonName p
where i.organism = tn.name
and tn.taxon_id = t.taxon_id
and tn.name_class = 'scientific name'
and t.parent_id = p.taxon_id
and p.name_class =  'scientific name'
union
select 'unclassified Plasmodium' as term, 'Unknown' as internal, '' as parentTerm from dual
      ]]>
      </sql>

      <sql  includeProjects="ToxoDB">
      <![CDATA[
select distinct i.organism as term, tn.name as internal, p.name as parentTerm 
from apidb.isolateattributes i, sres.taxonname tn, 
     sres.taxon t, sres.TaxonName p
where i.organism = tn.name
and tn.taxon_id = t.taxon_id
and tn.name_class = 'scientific name'
and t.parent_id = p.taxon_id
and p.name_class =  'scientific name'
--union
--select 'unclassified Toxoplasma' as term, 'Unknown' as internal, '' as parentTerm from dual
      ]]>
      </sql>

      <sql  includeProjects="GiardiaDB">
      <![CDATA[
select distinct i.organism as term, tn.name as internal, p.name as parentTerm 
from apidb.isolateattributes i, sres.taxonname tn, 
     sres.taxon t, sres.TaxonName p
where i.organism = tn.name
and tn.taxon_id = t.taxon_id
and tn.name_class = 'scientific name'
and t.parent_id = p.taxon_id
and p.name_class =  'scientific name'
union
select 'unclassified Giardia' as term, 'Unknown' as internal, '' as parentTerm from dual
      ]]>
      </sql>
    </sqlQuery>
<!--
      <sql  includeProjects="PlasmoDB">
      <![CDATA[
    select 'P.f. ' || new as term, new as internal, '' as parentTerm
    from (
      SELECT lower(regexp_replace(src.strain, '[-_/]', '-')) as new
      FROM DoTS.IsolateSource src
      )
    group by new order by new
      ]]>
      </sql>
    </sqlQuery>
-->

 <processQuery name="withIsolates" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="200" wsName="internal"/>
      <wsColumn name="term" width="200" wsName="term"/>
      <wsColumn name="parentTerm" width="200" wsName="parentTerm"/>
    </processQuery>

  </querySet>

<!-- Now redundant. See the prtinent question for more information

  <querySet name="submitterVQ" queryType="vocab">
    <sqlQuery name="withIsolates" includeProjects="PlasmoDB">
      <column name="internal"/>
      <column name="term"/>
      <sql>
      <![CDATA[
      SELECT distinct src.collected_by AS term,
             src.collected_by AS internal
      FROM   DoTS.IsolateSource src
            WHERE  src.collected_by is not null
      ORDER BY src.collected_by
      ]]>
      </sql>
    </sqlQuery>

 <processQuery name="withIsolates" processName="org.apidb.apicomplexa.wsfplugin.apifed.ApiFedPlugin" includeProjects="EuPathDB">
      <wsColumn name="internal" width="200" wsName="internal"/>
      <wsColumn name="term" width="200" wsName="term"/>
    </processQuery>

  </querySet>
-->

</wdkModel>

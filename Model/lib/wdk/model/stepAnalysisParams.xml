<wdkModel>

  <paramSet name="stepAnalysisParams">
    
    <flatVocabParam name="organismsInAnswer"
                    queryRef="stepAnalysisParamQueries.organismsInAnswer"
                    prompt="Organism"
                    quote="false"
                    multiPick="false" >
      <help>Choose an organism to run the enrichment analysis on.  Only organisms in your result are available.</help>
    </flatVocabParam>

    <flatVocabParam name="ontologiesInAnswer"
                    queryRef="stepAnalysisParamQueries.ontologiesInAnswer"
                    prompt="Ontology"
                    quote="false"
                    multiPick="false" >
      <help>
	Choose the Ontology that you are interested in analyzing. Only terms from this ontology will be considered during the enrichment analysis.
The ontologies are three structured, controlled vocabularies that describe gene products in terms of their related biological processes, cellular components and molecular functions. For statistical reasons, only one ontology may be analyzed at once. If you are interested in more than one, run separate GO enrichment analyses.
      </help>

    </flatVocabParam>


    <enumParam name="evidenceCodes"
               prompt="Evidence" quote="false">
      <help>
	A GO Evidence Code of IEA is assigned to a computationally assigned association.All others have some degree of curation
      </help>
      <enumList>   
        <enumValue default="true">
          <term>Computed</term>
          <internal>Computed</internal>
        </enumValue>
        <enumValue default="true">
          <term>Curated</term>
          <internal>Curated</internal>
        </enumValue>
      </enumList>   
    </enumParam>

    <enumParam name="limitToGoSlim"
               prompt="Limit to GO Slim terms" quote="false">
      <help>
	Choose Yes to limit enrichment analysis based on terms that are in the GO Slim generic subset. This will limit both the background and the gene list of interest.
      </help>
      <enumList>   
        <enumValue default="true">
          <term>No</term>
          <internal>No</internal>
        </enumValue>
        <enumValue>
          <term>Yes</term>
          <internal>Yes</internal>
        </enumValue>
      </enumList>   
    </enumParam>


    <numberParam name="pValue"
		 prompt="P-Value cutoff"
		 min="0" max="1.0">
      <help>
	Choose the P-Value Cutoff that a GO term must meet before it is considered enriched in your gene result. The P-value is a statistical measure of the likelihood that a certain GO term appears among the genes in your results more often than it appears in the set of all genes for that organism (background).
      </help>
    </numberParam>
  </paramSet>

  <querySet name="stepAnalysisParamQueries" queryType="vocab" isCacheable="true">

    <sqlQuery name="organismsInAnswer" doNotTest="1">
      <column name="term" />
      <column name="display" />
      <column name="internal"/>
      <sql>
        <![CDATA[

select organism as term, organism as display, organism as internal
from (SELECT distinct ga.organism
FROM ApidbTuning.GeneAttributes ga
order by ga.organism asc) q
        ]]>
      </sql>
    </sqlQuery>
    
    <sqlQuery name="ontologiesInAnswer" doNotTest="1">
      <column name="term" />
      <column name="display" />
      <column name="internal"/>
      <sql>
        <![CDATA[
		 select ontology as term, ontology as display, ontology as internal
		 from (
		  select distinct gts.ontology
		 from apidbtuning.GoTermSummary gts
		 where gts.ontology is not null) q
        ]]>
      </sql>
    </sqlQuery>
    
  </querySet>
</wdkModel>

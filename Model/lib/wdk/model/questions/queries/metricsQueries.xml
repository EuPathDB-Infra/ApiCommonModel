<wdkModel>

  <querySet name="MetricsId" queryType="id" isCacheable="true">


    <!-- ************************************************************ -->
    <!--  Gene Page Tables   -->
    <!-- ************************************************************ -->

    <sqlQuery name="GenePageTableMetrics" doNotTest="true" >

<!--
      <paramRef ref="MetricsParams.projectIdSelect"/>
-->
      <column name="source_id"/>
      <column name="project_id"/>
      <column name="record_class"/>
      <column name="table_name"/>
      <column name="count"/>
      <column name="start_date"/>
      <column name="end_date"/>

      <sql>
        <![CDATA[
          SELECT to_char(rownum) as source_id, project_id,
                 record_class, table_name, count, start_date, end_date
          FROM (
            SELECT '(unknown)' as project_id,RECORD_CLASS_URL_SEGMENT as record_class,table_name,count,start_date,end_date
            FROM sfischer.GENEPAGETABLESTATS@USER_DBLINK@
            --WHERE project_id in ( $$projectIdSelect$$ )
          )
          ORDER BY count desc,record_class asc,table_name asc,project_id asc
        ]]>
      </sql>
    </sqlQuery>


    <!-- ************************************************************ -->
    <!--  Tools   -->
    <!-- ************************************************************ -->

    <sqlQuery name="ToolMetrics" doNotTest="true" >

      <paramRef ref="MetricsParams.projectIdSelect"/>

      <column name="source_id"/>
      <column name="project_id"/>
      <column name="tool"/>
      <column name="count"/>
      <column name="mozilla_count"/>
      <column name="start_date"/>
      <column name="end_date"/>

      <sql>
        <![CDATA[
          SELECT to_char(rownum) as source_id,project_id,
                 tool,count,mozilla_count,start_date,end_date
          FROM (
            SELECT project_id,tool,count,mozilla_count,start_date,end_date
            FROM sfischer.TOOLSSTATS@USER_DBLINK@
            WHERE project_id in ( $$projectIdSelect$$ )
          )
          ORDER BY count desc,tool asc,project_id asc
        ]]>
      </sql>
    </sqlQuery>



    <!-- ************************************************************ -->
    <!--  Searches   -->
    <!-- ************************************************************ -->

    <sqlQuery name="SearchMetrics" doNotTest="true" >

      <paramRef ref="MetricsParams.projectIdSelect"/>

      <column name="source_id"/>
      <column name="project_id"/>
      <column name="search_name"/>
      <column name="steps_count"/>
      <column name="start_date"/>
      <column name="end_date"/>

      <sql>
        <![CDATA[
          SELECT to_char(rownum) as source_id, project_id,
                 search_name, steps_count, start_date, end_date
          FROM (
            SELECT project_id,search_name, steps_count, start_date, end_date
            FROM sfischer.SEARCHESSTATS@USER_DBLINK@
            WHERE project_id in ( $$projectIdSelect$$ )
          )
          ORDER BY steps_count desc,search_name asc,project_id asc
        ]]>
      </sql>
    </sqlQuery>

  </querySet>

</wdkModel>

<wdkModel>

  <!-- ==================================================================== -->
  <!-- Params  -->
  <!-- ==================================================================== -->
  <paramSet name="MetricsParams">


       <dateRangeParam name="date"
                       prompt="Choose start and end dates "
                       minDate="2024-08-01"
                       maxDate="2028-12-31">
         <help>"Select the earliest and latest dates to include metrics for one month or several consequitive months."</help>
          <suggest default="{'min': '2024-08-01', 'max': '2028-12-31'}" /> 
       </dateRangeParam>

<!--
    <stringParam name="date_min"
                 prompt="Metric date >="
                 number="false">
      <help><![CDATA[Please enter a date with this format: DD-MMM-YY. <br>We only have data available since 01-AUG-24.]]> </help>
      <suggest default="01-JAN-22"/>
    </stringParam>

    <stringParam name="date_max"
                 prompt="Metric date &lt;="
                 number="false">
      <help><![CDATA[Please enter this format: DD-MMM-YY. <br>We only have data available since 01-AUG-24.]]> </help>
      <suggest default="31-DEC-40"/>
    </stringParam>
-->

    <stringParam name="org_count_min"
                 prompt="Organism count >="
                 number="true">
      <help><![CDATA[]]> </help>
      <suggest default="1"/>
    </stringParam>

    <stringParam name="org_count_max"
                 prompt="Organism count &lt;="
                 number="true">
      <help><![CDATA[]]> </help>
      <suggest default="1000"/>
    </stringParam>

    <stringParam name="step_count_min"
                 prompt="Step count >="
                 number="true">
      <help><![CDATA[]]> </help>
      <suggest default="1"/>
    </stringParam>

    <stringParam name="step_count_max"
                 prompt="Step count &lt;="
                 number="true">
      <help><![CDATA[]]> </help>
      <suggest default="10000"/>
    </stringParam>

    <stringParam name="project_id"
                 prompt="Project"
                 number="false">
      <help>Project</help>
      <suggest default="PlasmoDB"/>
    </stringParam>

    <flatVocabParam name="projectIdSelect"
        queryRef="MetricsVQ.ProjectId"
        prompt="Project"
        multiPick="true">
      <help>Select projects</help>
      <suggest selectMode="none"/>
    </flatVocabParam>

  </paramSet>

  <querySet name="MetricsVQ" queryType="vocab" isCacheable="true">

    <sqlQuery name="ProjectId">
      <column name="internal"/>
      <column name="term"/>
      <column name="display"/>
      <sql>
        <![CDATA[
          select * from (SELECT distinct project_id as internal, project_id as term,
                 CASE when project_id in ('EuPathDB') then 'VEuPathDB'
                   else project_id
                   end as display
          FROM sfischer.SEARCHESSTATS@USER_DBLINK@)
          ORDER BY display
        ]]>
      </sql>
    </sqlQuery>

  </querySet>

</wdkModel>

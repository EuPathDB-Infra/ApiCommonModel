<wdkModel>


  <!--===========================================================================-->
  <!-- Metrics   questions -->
  <!--===========================================================================-->

  <questionSet name="MetricsQuestions" displayName="Search for Metrics">


    <!-- ************************************************************ -->
    <!-- Organism-related page views  stats                             -->
    <!-- ************************************************************ -->
    <question name="OrgPageViewMetrics"
      displayName="Organism-related Page views"
      shortDisplayName="Pages per Organism"
      queryRef="MetricsId.OrgPageViewMetrics"
      recordClassRef="MetricsRecordClasses.MetricsRecordClass"  >

      <attributesList
        summary="organism,count,start_date,end_date"
        sorting="count desc,organism asc"
      />

      <summary>
        Organism-related page views usage.
      </summary>

      <description>
        Organism-related page views, that is record pages for record types: genes, genomic sequences, snps, datasets.
      </description>

      <dynamicAttributes>

        <columnAttribute name="organism" displayName="Organism" align="center">
          <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                    implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
            <description>
              <![CDATA[ Display the terms in the attribute as word clouds ]]>
            </description>
          </reporter>
        </columnAttribute>

        <columnAttribute name="count" displayName="Page count" align="center">
          <reporter name="histogram" displayName="Histogram" scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
            <description>Display the histogram of the values of this attribute</description>
            <property name="type">int</property>
          </reporter>
        </columnAttribute>

        <columnAttribute name="start_date" displayName="Start Date">
                    <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                    implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
            <description>
              <![CDATA[ Display the terms in the attribute as word clouds ]]>
            </description>
          </reporter>
        </columnAttribute>

        <columnAttribute name="end_date" displayName="End Date"/>

      </dynamicAttributes>

    </question>



    <!-- ************************************************************ -->
    <!--  Organism param stats   -->
    <!--    OrgParamCountMetrics:    projectId |  organismValueCount |  stepCount  -->
    <!--    OrgParamNameMetrics:    projectId |  organismName |  stepCount  -->
    <!-- ************************************************************ -->

    <question name="OrgParamCountMetrics"
      displayName="Number of Organisms selected per Search"
      shortDisplayName="Org count per Search"
      queryRef="MetricsId.OrgParamCountMetrics"
      recordClassRef="MetricsRecordClasses.MetricsRecordClass"  >

      <attributesList
        summary="project_id,number_of_organisms,steps_count,start_date,end_date"
        sorting="steps_count desc,number_of_organisms desc,project_id asc"
      />

      <summary>
        Organism parameter: how many origanisms are selected in searches.
      </summary>

      <description>
       Organism parameter: how many origanisms are selected in searches.
      </description>

      <dynamicAttributes>

        <columnAttribute name="project_id" displayName="Project ID" align="center">
          <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                    implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
            <description>
              <![CDATA[ Display the terms in the attribute as word clouds ]]>
            </description>
          </reporter>
        </columnAttribute>

        <columnAttribute name="number_of_organisms" displayName="Organism count" align="center">
          <reporter name="histogram" displayName="Histogram" scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
            <description>Display the histogram of the values of this attribute</description>
            <property name="type">int</property>
          </reporter>
        </columnAttribute>

        <columnAttribute name="steps_count" displayName="# Searches" align="center">
          <reporter name="histogram" displayName="Histogram" scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
            <description>Display the histogram of the values of this attribute</description>
            <property name="type">int</property>
          </reporter>
        </columnAttribute>

        <columnAttribute name="start_date" displayName="Start Date"/>
        <columnAttribute name="end_date" displayName="End Date"/>

      </dynamicAttributes>

    </question>


    <question name="OrgParamNameMetrics"
      displayName="Number of Searches per Organism"
      shortDisplayName="Searches count per Organism"
      queryRef="MetricsId.OrgParamNameMetrics"
      recordClassRef="MetricsRecordClasses.MetricsRecordClass"  >

      <attributesList
        summary="project_id,organism,steps_count,start_date,end_date"
        sorting="steps_count desc,organism asc,project_id asc"
      />

      <summary>
        Organism parameter: what origanisms are selected in searches.
      </summary>

      <description>
       Organism parameter: what origanisms are selected in searches.
      </description>

      <dynamicAttributes>

        <columnAttribute name="project_id" displayName="Project ID" align="center">
          <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                    implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
            <description>
              <![CDATA[ Display the terms in the attribute as word clouds ]]>
            </description>
          </reporter>
        </columnAttribute>

        <columnAttribute name="organism" displayName="Organism" align="center">
          <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                    implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
            <description>
              <![CDATA[ Display the terms in the attribute as word clouds ]]>
            </description>
          </reporter>
        </columnAttribute>

        <columnAttribute name="steps_count" displayName="# Searches" align="center">
          <reporter name="histogram" displayName="Histogram" scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
            <description>Display the histogram of the values of this attribute</description>
            <property name="type">int</property>
          </reporter>
        </columnAttribute>

        <columnAttribute name="start_date" displayName="Start Date"/>
        <columnAttribute name="end_date" displayName="End Date"/>

      </dynamicAttributes>

    </question>



    <!-- ************************************************************ -->
    <!-- Gene Page Tables                            -->
    <!-- ************************************************************ -->
    <question name="GenePageTableMetrics"
      displayName="Gene Page Table requests"
      shortDisplayName="Gene Tables"
      queryRef="MetricsId.GenePageTableMetrics"
      recordClassRef="MetricsRecordClasses.MetricsRecordClass"  >

      <attributesList
        summary="project_id,record_class,table_name,count,start_date,end_date"
        sorting="count desc,record_class asc,table_name asc,project_id asc"
      />

      <summary>
        Gene page Tables/Sections usage.
      </summary>

      <description>
        How often users open the gene page sections, closed by default, other than a few..
      </description>

      <dynamicAttributes>

        <columnAttribute name="project_id" displayName="Project ID" align="center">
          <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                    implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
            <description>
              <![CDATA[ Display the terms in the attribute as word clouds ]]>
            </description>
          </reporter>
        </columnAttribute>

        <columnAttribute name="record_class" displayName="Record class" align="center">
          <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                    implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
            <description>
              <![CDATA[ Display the terms in the attribute as word clouds ]]>
            </description>
          </reporter>
        </columnAttribute>

        <columnAttribute name="table_name" displayName="Table name" align="center">
          <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                    implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
            <description>
              <![CDATA[ Display the terms in the attribute as word clouds ]]>
            </description>
          </reporter>
        </columnAttribute>

        <columnAttribute name="count" displayName="# Requests" align="center" 
             help="A request is made when the user opens a section in the geene page, and when the page is reloaded with the section opened.">
          <reporter name="histogram" displayName="Histogram" scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
            <description>Display the histogram of the values of this attribute</description>
            <property name="type">int</property>
          </reporter>
        </columnAttribute>

        <columnAttribute name="start_date" displayName="Start Date"/>
        <columnAttribute name="end_date" displayName="End Date"/>

      </dynamicAttributes>

    </question>



    <!-- ************************************************************ -->
    <!-- Tools                            -->
    <!-- ************************************************************ -->
    <question name="ToolMetrics"
      displayName="Tool usage"
      shortDisplayName="Tools"
      queryRef="MetricsId.ToolMetrics"
      recordClassRef="MetricsRecordClasses.MetricsRecordClass"  >

      <attributesList
        summary="project_id,tool,count,start_date,end_date"
        sorting="count desc,tool asc,project_id asc"
      />

      <summary>
        Tools usage.
      </summary>

      <description>
        Tools usage.
      </description>

      <dynamicAttributes>

        <columnAttribute name="project_id" displayName="Project ID" align="center">
          <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                    implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
            <description>
              <![CDATA[ Display the terms in the attribute as word clouds ]]>
            </description>
          </reporter>
        </columnAttribute>

        <columnAttribute name="tool" displayName="Tool" align="center">
          <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                    implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
            <description>
              <![CDATA[ Display the terms in the attribute as word clouds ]]>
            </description>
          </reporter>
        </columnAttribute>

        <columnAttribute name="count" displayName="# Hits" align="center">
          <reporter name="histogram" displayName="Histogram" scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
            <description>Display the histogram of the values of this attribute</description>
            <property name="type">int</property>
          </reporter>
        </columnAttribute>

        <columnAttribute name="start_date" displayName="Start Date"/>
        <columnAttribute name="end_date" displayName="End Date"/>

      </dynamicAttributes>

    </question>


    <!-- ************************************************************ -->
    <!-- Searches: step count                            -->
    <!-- ************************************************************ -->
    <question name="SearchMetrics"
      displayName="Search popularity"
      shortDisplayName="Searches"
      queryRef="MetricsId.SearchMetrics"
      recordClassRef="MetricsRecordClasses.MetricsRecordClass"  >

      <attributesList
        summary="project_id,record_name,search_name,steps_count,start_date,end_date"
        sorting="steps_count desc,record_name asc,search_name asc,project_id asc"
      />

      <summary>
        Searches and their step count.
      </summary>

      <description>
        We report the number of steps with these searches.
      </description>

      <dynamicAttributes>

        <columnAttribute name="project_id" displayName="Project ID" align="center">
          <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                    implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
            <description>
              <![CDATA[ Display the terms in the attribute as word clouds ]]>
            </description>
          </reporter>
        </columnAttribute>

        <columnAttribute name="record_name" displayName="Record type" align="center">
          <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                    implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
            <description>
              <![CDATA[ Display the terms in the attribute as word clouds ]]>
            </description>
          </reporter>
        </columnAttribute>

        <columnAttribute name="search_name" displayName="Search name" align="center">
          <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                    implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
            <description>
              <![CDATA[ Display the terms in the attribute as word clouds ]]>
            </description>
          </reporter>
        </columnAttribute>

        <columnAttribute name="steps_count" displayName="# Steps" align="center">
          <reporter name="histogram" displayName="Histogram" scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
            <description>Display the histogram of the values of this attribute</description>
            <property name="type">int</property>
          </reporter>
        </columnAttribute>

        <columnAttribute name="start_date" displayName="Start Date"/>
        <columnAttribute name="end_date" displayName="End Date"/>

      </dynamicAttributes>

    </question>

  </questionSet>


</wdkModel>


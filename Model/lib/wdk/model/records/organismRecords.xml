<wdkModel>
  <recordClassSet name="OrganismRecordClasses">

      <recordClass name="OrganismRecordClass" displayName="Organism" urlName="organism"> 

          <attributeCategories>
            <attributeCategory name="genemetrics" displayName="Gene Metrics (gene counts)"/>
            <attributeCategory name="genomedatatypes" displayName="Genome Data Types">
              <attributeCategory name="flags" displayName="Flag that indicates if we have this data type for this genome"/>
            </attributeCategory>
          </attributeCategories>

         <testParamValues includeProjects="CryptoDB">
             <paramValue name="source_id">cparIowaII</paramValue>
             <paramValue name="project_id">CryptoDB</paramValue>
         </testParamValues> 
         <testParamValues includeProjects="MicrosporidiaDB">
             <paramValue name="source_id">ecunEC1</paramValue>
             <paramValue name="project_id">MicrosporidiaDB</paramValue>
         </testParamValues> 
         <testParamValues includeProjects="PlasmoDB,EuPathDB">
             <paramValue name="source_id">pfal3D7</paramValue>
             <paramValue name="project_id">PlasmoDB</paramValue>
         </testParamValues> 
         <testParamValues includeProjects="ToxoDB">
             <paramValue name="source_id">tgonME49</paramValue>
             <paramValue name="project_id">ToxoDB</paramValue>
         </testParamValues> 
         <testParamValues includeProjects="TriTrypDB">
             <paramValue name="source_id">tbruLister427</paramValue>
             <paramValue name="project_id">TriTrypDB</paramValue>
         </testParamValues> 
         <testParamValues includeProjects="AmoebaDB">
             <paramValue name="source_id">ehisHM3IMSS</paramValue>
             <paramValue name="project_id">AmoebaDB</paramValue>
         </testParamValues> 

        <!-- primary key definition -->
        <primaryKey aliasQueryRef="OrganismAttributes.OrganismAlias">
           <columnRef>source_id</columnRef>
           <columnRef>project_id</columnRef>
        </primaryKey>

        <idAttribute name="primary_key" displayName="Organism">
           <text>
                $$organism_name$$
           </text>
           <display>
             <![CDATA[
                <i>$$species$$</i> $$strain$$
             ]]>
           </display>

        </idAttribute>

     <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
     <!-- Reporter                                                     -->
     <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

      <reporter name="attributesTabular" displayName="%%attributesReporterDisplayName%%" scopes="results"
                implementation="org.gusdb.wdk.model.report.reporter.AttributesTabularReporter">
        <property name="page_size">500</property>
      </reporter>

      <reporter name="tableTabular" displayName="%%tableReporterDisplayName%%" scopes="results"
                implementation="org.gusdb.wdk.model.report.reporter.TableTabularReporter">
      </reporter>

      <reporter name="fullRecord" displayName="%%fullReporterDisplayName%%"  scopes="record"
                implementation="org.gusdb.wdk.model.report.reporter.FullRecordReporter" />

      <reporter name="xml" displayName="XML: choose from columns and/or tables"   scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.XMLReporter" />

      <reporter name="json" displayName="json: choose from columns and/or tables"  scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.JSONReporter" />

         <!--+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
         <!-- Attributes:   defaults are: internal="false"     (AVAILABLE as column) 
                                          inReportMaker="true" (AVAILABLE in download report)   -->
         <!--               when both internal=true and reportMaker=false, it might be used :
                             = in record page  
                             = in a link or textAttribute                                      -->
         <!--+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

          <pkColumnAttribute name="project_id" displayName="VEuPathDB Project" inReportMaker="true" internal="false">
              <reporter name="wordCloud" displayName="Word Cloud" scopes=""
                      implementation="org.eupathdb.common.model.report.EbrcWordCloudAttributeReporter">
                <description>
                  <![CDATA[ Display the terms in the attribute as word clouds ]]>
                </description>
              </reporter>
          </pkColumnAttribute>

          <textAttribute name="overview" displayName="Overview" inReportMaker="false" internal="true">
            <text>
              <![CDATA[
                Organism: <i>$$organism_name$$</i><br />
                Database: $$database_version$$<br />
                Megabase Pairs: $$megabps$$ <br /> <br />
              ]]>
            </text>
          </textAttribute>

          <textAttribute name="URLGenomeFasta" displayName="Genome Fasta Download Link">            
             <text>
               <![CDATA[
               http://$$project_id$$.org/common/downloads/Current_Release/$$name_for_filenames$$/fasta/data/$$project_id$$-%%buildNumber%%_$$name_for_filenames$$_Genome.fasta
               ]]>
            </text>
          </textAttribute>

          <textAttribute name="URLproteinFasta" displayName="Protein Fasta Download Link">
            <text>
               <![CDATA[
               http://$$project_id$$.org/common/downloads/Current_Release/$$name_for_filenames$$/fasta/data/$$project_id$$-%%buildNumber%%_$$name_for_filenames$$_AnnotatedProteins.fasta
               ]]>
            </text>
          </textAttribute>

          <textAttribute name="URLgff" displayName="GFF Download Link">
            <text>
               <![CDATA[
               http://$$project_id$$.org/common/downloads/Current_Release/$$name_for_filenames$$/gff/data/$$project_id$$-%%buildNumber%%_$$name_for_filenames$$.gff 
               ]]>
            </text>
          </textAttribute>


     <attributeQueryRef ref="OrganismAttributes.organismAttrs">
        <columnAttribute name="orthomcl_abbrev" internal="true" inReportMaker="false"/>
        <columnAttribute name="name_for_filenames" internal="true" inReportMaker="false"/>
        <columnAttribute name="strain" displayName="Strain" />
        <columnAttribute name="contigCount" displayName="Contigs" attributeCategory="genemetrics" help="Total contig count" align="right" />
        <columnAttribute name="supercontigCount" displayName="Supercontigs" attributeCategory="genemetrics" help="Total supercontig count" align="right" />
        <columnAttribute name="chromosomeCount" displayName="Chromosomes" attributeCategory="genemetrics" help="Total chromosome count" align="right" />

<!-- GENE METRICS -->

        <columnAttribute name="genecount" displayName="Genes" attributeCategory="genemetrics" help="Total gene count" align="right" />
        <columnAttribute name="genecount_number"  internal="true" inReportMaker="false"/>
        <columnAttribute name="codinggenecount" displayName="Protein coding genes" attributeCategory="genemetrics" help="Protein coding gene count: it includes pseudogenes" align="right"/>
        <columnAttribute name="pseudogenecount" displayName="Pseudogenes" attributeCategory="genemetrics"  
          help="Pseudogene count" align="right"/>
        <columnAttribute name="othergenecount" displayName="Non Protein coding genes"  attributeCategory="genemetrics"  
          help="Number of genes that code for products other than proteins, for example: rRNA,tRNA,etc." align="right"/>
        <columnAttribute name="ecnumbercount" displayName="EC#" attributeCategory="genemetrics"  
          help="Number of genes with assigned Enzyme Commission numbers" align="right"/>
        <columnAttribute name="gocount" displayName="GO terms" attributeCategory="genemetrics"  
          help="Number of genes with assigned Gene Ontology terms" align="right" />
        <columnAttribute name="popsetcount" displayName="Popset Sequences" align="right" internal="true" 
          help="Number of genes that map to popset sequences "/>
        <columnAttribute name="rnaseqcount" displayName="RNA Seq" attributeCategory="genemetrics"  
          help="Number of genes that have evidence for transcript expression based on Transcriptome sequencing (RNA-Seq) experiments" align="right" />
        <columnAttribute name="chipchipgenecount" displayName="ChIP chip" attributeCategory="genemetrics"  
          help="Number of genes that have evidence of transcript expression based on the ChIP on chip studies" align="right" />
        <columnAttribute name="rtpcrcount" displayName="RT-PCR" attributeCategory="genemetrics"  
          help="Number of genes that have evidence for transcript expression based on Real Time PCR experiments" align="right"/>
        <columnAttribute name="estcount" displayName="ESTs" attributeCategory="genemetrics"  
          help="Number of genes that have evidence of transcript expression based on Expressed Sequence Tags studies" align="right"/>
        <columnAttribute name="snpcount" displayName="SNPs" attributeCategory="genemetrics"  
          help="Number of genes that have Single Nucleotide Polymorphism(s)" align="right" />
        <columnAttribute name="orthologcount" displayName="Orthologs" attributeCategory="genemetrics"  
          help="Number of genes that have orthologous genes" align="right"/>
        <columnAttribute name="arraygenecount" displayName="Microarray" attributeCategory="genemetrics"  
          help="Number of genes that have evidence of transcript expression based on Microarray studies" align="right" />
        <columnAttribute name="proteomicscount" displayName="Proteomics" attributeCategory="genemetrics"  
          help="Number of genes that have evidence of protein expression based on Mass Spectrometry studies" align="right"/>
        <columnAttribute name="tfbscount" displayName="TFBS" attributeCategory="genemetrics"  
          help="Total number of genes having evidence of expression based on transcription factor binding site identification experiments" align="right" />
        <columnAttribute name="communitycount" displayName="User comments" attributeCategory="genemetrics"  
          help="Number of genes with comments/notes from the research community" align="right"/>

        <columnAttribute name="organism_name" displayName="Organism (text)" internal="true" inReportMaker="false"/>
        <columnAttribute name="organism_full" displayName="Organism" inReportMaker="false"/>
        <columnAttribute name="species" displayName="Species"/>
        <columnAttribute name="is_annotated_genome"  displayName="Is Annotated" />
        <columnAttribute name="is_reference_strain"  displayName="Is Reference Strain" help="Reference genome indicates the genome used by us as the reference sequence to which other data sets are mapped"/>

        <columnAttribute name="download_link" displayName="Download Directory" internal="true" excludeProjects="EuPathDB"/>


        <textAttribute name="organism" displayName="Organism" internal="true" >
             <display><![CDATA[ <i>$$species$$</i> $$strain$$ ]]></display>
             <text><![CDATA[ $$organism_name$$  ]]></text>
        </textAttribute>

<!-- GENOME DATA TYPES -->

        <!--  columnAttribute displayName is used for reporters, while it is the linkAttribute displayName used for result column  -->
        <columnAttribute name="ncbi_tax_id" displayName="NCBI taxon ID" internal="true" />
        <linkAttribute name="ncbi_taxon_url" attributeCategory="genomedatatypes"
            help="Click to access this Taxon ID in NCBI" displayName="NCBI taxon ID" align="center" inReportMaker="false">
          <displayText>
            <![CDATA[
              $$ncbi_tax_id$$
            ]]>
          </displayText>
          <url>
            <![CDATA[
             http://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?id=$$ncbi_tax_id$$
            ]]>
          </url>
         </linkAttribute>


        <columnAttribute name="species_ncbi_tax_id" displayName="Species NCBI taxon ID" internal="true" />
        <linkAttribute name="species_ncbi_taxon_url" attributeCategory="genomedatatypes"
            help="Click to access this Taxon ID in NCBI" displayName="Species NCBI taxon ID" align="center" inReportMaker="false">
          <displayText>
            <![CDATA[
              $$species_ncbi_tax_id$$
            ]]>
          </displayText>
          <url>
            <![CDATA[
             http://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?id=$$species_ncbi_tax_id$$
            ]]>
          </url>
         </linkAttribute>

 
        <columnAttribute name="database_version" displayName="Genome version" />

        <columnAttribute name="megabps" displayName="Mega base Pairs" internal="true" />
        <linkAttribute name="megabpsurl" displayName="Genome size (Mbp)" attributeCategory="genomedatatypes"
            help="Available Megabase pairs; click to run a search and get all genomic sequences for this genome" align="right" inReportMaker="false">
          <displayText>
            <![CDATA[
              $$megabps$$
            ]]>
          </displayText>
          <url>
            <![CDATA[
              @WEBAPP_BASE_URL@/search/genomic-sequence/SequencesByTaxon?param.organism=$$organism_name$$&autoRun=1
            ]]>
          </url>
        </linkAttribute> 

        <linkAttribute name="genecounturl" displayName="Genes" attributeCategory="genomedatatypes" 
            help="Total Gene Count; click to run a search and get all genes annotated in this genome" align="right" inReportMaker="false">
          <displayText>
            <![CDATA[
              $$genecount$$
            ]]>
          </displayText>
          <url>
            <![CDATA[
             @WEBAPP_BASE_URL@/search/transcript/GenesByTaxon?param.organism=$$organism_name$$&autoRun=1
            ]]>
          </url>
        </linkAttribute> 

<!-- Genome DATA TYPES -->

        <columnAttribute name="isOrganellar_flag" displayName="Organellar genome(s)"  inReportMaker="false"/>
        <textAttribute name="isOrganellar" displayName="Organellar genome(s)" align="center" inReportMaker="false" attributeCategory="flags">
          <text>
            <![CDATA[
            <img width="8" border="0" alt="$$isOrganellar_flag$$" src="/a/images/reddot.gif" style="display:$$isOrganellar_flag$$"/>
            ]]>
          </text>
         </textAttribute>

        <columnAttribute name="chipchip_flag" internal="true" inReportMaker="false"/>
        <textAttribute name="hasChipChip" displayName="ChIP chip" align="center" inReportMaker="false" attributeCategory="flags">
           <text>
             <![CDATA[
             <img width="8" border="0" alt="$$chipchip_flag$$" src="/a/images/reddot.gif" style="display:$$chipchip_flag$$"/>
             ]]>
           </text>
        </textAttribute>

        <columnAttribute name="array_flag" internal="true" inReportMaker="false"/>
        <textAttribute name="hasArray" displayName="Microarray" align="center" inReportMaker="false" attributeCategory="flags">
           <text>
             <![CDATA[
             <img width="8" border="0" alt="$$array_flag$$" src="/a/images/reddot.gif" style="display:$$array_flag$$"/>
             ]]>
           </text>
          </textAttribute>

         <columnAttribute name="rtpcr_flag" internal="true" inReportMaker="false"/>
         <textAttribute name="hasRTPCR" displayName="RT-PCR" align="center" inReportMaker="false" internal="true" >
           <text>
             <![CDATA[
             <img width="8" border="0" alt="$$rtpcr_flag$$" src="/a/images/reddot.gif" style="display:$$rtpcr_flag$$"/>
             ]]>
           </text>
          </textAttribute>

         <columnAttribute name="ortholog_flag" internal="true" inReportMaker="false"/>
         <textAttribute name="hasOrtholog" displayName="Ortholog" align="center" inReportMaker="false" internal="true" >
           <text>
             <![CDATA[
             <img width="8" border="0" alt="$$ortholog_flag$$" src="/a/images/reddot.gif" style="display:$$ortholog_flag$$"/>
             ]]>
           </text>
          </textAttribute>

         <columnAttribute name="community_flag" internal="true" inReportMaker="false"/>
         <textAttribute name="hasCommunity" displayName="Community" align="center" inReportMaker="false" internal="true" >
           <text>
             <![CDATA[
             <img width="8" border="0" alt="$$community_flag$$" src="/a/images/reddot.gif" style="display:$$community_flag$$"/>
             ]]>
           </text>
          </textAttribute>

         <columnAttribute name="ec_flag" internal="true" inReportMaker="false"/>
         <textAttribute name="hasEC" displayName="EC#" align="center" inReportMaker="false" internal="true" >
           <text>
             <![CDATA[
             <img width="8" border="0" alt="$$ec_flag$$" src="/a/images/reddot.gif" style="display:$$ec_flag$$"/>
             ]]>
           </text>
          </textAttribute>

         <columnAttribute name="go_flag" internal="true" inReportMaker="false"/>
         <textAttribute name="hasGO" displayName="Ontology" align="center" inReportMaker="false" internal="true" >
           <text>
             <![CDATA[
             <img width="8" border="0" alt="$$go_flag$$" src="/a/images/reddot.gif" style="display:$$go_flag$$"/>
             ]]>
           </text>
          </textAttribute>

         <columnAttribute name="tfbs_flag" internal="true" inReportMaker="false"/>
         <textAttribute name="hasTFBS" displayName="TFBS site" align="center" inReportMaker="false" internal="true" >
           <text>
             <![CDATA[
             <img width="8" border="0" alt="$$tfbs_flag$$" src="/a/images/reddot.gif" style="display:$$tfbs_flag$$"/>
             ]]>
           </text>
          </textAttribute> 

         <columnAttribute name="rnaseq_flag" internal="true" inReportMaker="false"/>
         <textAttribute name="hasRNASeq" displayName="RNA Seq" align="center" inReportMaker="false"  attributeCategory="flags">
           <text>
             <![CDATA[
             <img width="8" border="0" alt="$$rnaseq_flag$$" src="/a/images/reddot.gif" style="display:$$rnaseq_flag$$"/>
             ]]>
           </text>
          </textAttribute>


         <columnAttribute name="est_flag" internal="true" inReportMaker="false"/>
         <textAttribute name="hasEST" displayName="ESTs" align="center" inReportMaker="false" attributeCategory="flags">
           <text>
             <![CDATA[
             <img width="8" border="0" alt="$$est_flag$$" src="/a/images/reddot.gif" style="display:$$est_flag$$"/>
             ]]>
           </text>
          </textAttribute>

         <columnAttribute name="snp_flag" internal="true" inReportMaker="false"/>
         <textAttribute name="hasSNP" displayName="SNPs" align="center" inReportMaker="false" attributeCategory="flags">
           <text>
             <![CDATA[
             <img width="8" border="0" alt="$$snp_flag$$" src="/a/images/reddot.gif" style="display:$$snp_flag$$"/>
             ]]>
           </text>
          </textAttribute>

         <columnAttribute name="proteomics_flag" internal="true" inReportMaker="false"/>
         <textAttribute name="hasProteomics" displayName="Proteomics" align="center" inReportMaker="false" attributeCategory="flags">
           <text>
             <![CDATA[
             <img width="8" border="0" alt="$$proteomics_flag$$" src="/a/images/reddot.gif" style="display:$$proteomics_flag$$"/>
             ]]>
           </text>
           </textAttribute>

         <columnAttribute name="hasPopset_flag" internal="true" inReportMaker="false"/>
         <textAttribute name="hasPopset" displayName="Popset Sequences" align="center" inReportMaker="false" attributeCategory="flags">
            <text>
              <![CDATA[
              <img width="8" border="0"  alt="$$hasPopset_flag$$" src="/a/images/reddot.gif" style="display:$$hasPopset_flag$$" />
              ]]>
            </text>
           </textAttribute>
 
          <columnAttribute name="hasHTSIsolate_flag" internal="true" inReportMaker="false"/>
          <textAttribute name="hasHTSIsolate" displayName="Genome-wide reseq" align="center" inReportMaker="false" attributeCategory="flags">
            <text>
              <![CDATA[
              <img width="8" border="0" alt="$$hasHTSIsolate_flag$$" src="/a/images/reddot.gif" style="display:$$hasHTSIsolate_flag$$"/>
              ]]>
            </text>
           </textAttribute> 


            <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
            <!-- overview -->  
            <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
            <textAttribute name="record_overview" excludeProjects="EuPathDB">
              <text>
                <![CDATA[ 
                <div class="eupathdb-RecordOverview">
                  <div class="eupathdb-RecordOverviewLeft">
                    <div class="eupathdb-RecordOverviewItem" data-label="Genome Version/Assembly ID">$$genome_source$$: $$genome_version$$</div>
                    <div class="eupathdb-RecordOverviewItem" data-label="Structural Annotation Version">$$annotation_source$$: $$annotation_version$$</div>
                    <div class="eupathdb-RecordOverviewItem" data-label="Megabase Pairs">$$megabps$$</div>
                    <div class="eupathdb-RecordOverviewItem" data-label="Genome Data Set page">$$dataset_page$$</div>
                    <div class="eupathdb-RecordOverviewItem" data-label="Download directory">$$download_link$$</div> 
                  </div>
                </div>
                ]]>
              </text>
            </textAttribute>


     </attributeQueryRef>



     <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
     <!-- other attributes for record page or download  -->
     <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

     <attributeQueryRef ref="OrganismAttributes.GenomeVersion">
       <columnAttribute name="genome_version"  displayName="Genome Version/Assembly ID"/>
       <columnAttribute name="genome_source"  displayName="Genome Source"/>
     </attributeQueryRef>

     <attributeQueryRef ref="OrganismAttributes.GenomeAnnotationVersion">
       <columnAttribute name="annotation_version"  displayName="Structural Annotation Version"/>
       <columnAttribute name="annotation_source"  displayName="Structural Annotation Source"/>
     </attributeQueryRef>

     <attributeQueryRef ref="OrganismAttributes.IsPublished">
       <columnAttribute name="is_published"  displayName="Is Published" internal="true"   />
       <columnAttribute name="dataset_page" displayName="Genome Data Set" internal="true"   />
     </attributeQueryRef>

     <attributeQueryRef ref="OrganismAttributes.ReleasePolicy">
       <columnAttribute name="release_policy"  displayName="Release policy" internal="true"   />
     </attributeQueryRef>     


     <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
     <!-- organism metrics TABLES  -->
     <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

     <table name="SequenceCounts" 
            displayName="Sequence types"
            queryRef="OrganismTables.SequenceCounts">
        <columnAttribute name="source_id" internal="true"/>
        <columnAttribute  name="project_id" internal="true"/>
        <columnAttribute  name="sequence_type" displayName="Sequence type"/>
        <columnAttribute  name="sequence_count" displayName="Count"/>
     </table>


     <table name="GeneCounts" 
            displayName="Gene types"
            queryRef="OrganismTables.GeneCounts">
        <columnAttribute name="source_id" internal="true"/>
        <columnAttribute  name="project_id" internal="true"/>
        <columnAttribute  name="gene_type" displayName="Gene type"/>
        <columnAttribute  name="pseudo" displayName="Pseudogene"/>
        <columnAttribute  name="gene_count" displayName="Count"/>
     </table>

     <table name="GenomeSequencingAndAnnotationAttribution"
            displayName="Genome Sequencing and Annotation"
            queryRef="OrganismTables.GenomeSequencingAndAnnotation" inReportMaker="false">
       <columnAttribute displayName="Description" name="description"/>

     </table>


     </recordClass>
  </recordClassSet>
</wdkModel>

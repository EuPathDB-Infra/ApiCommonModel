<wdkModel>
  <recordClassSet name="FileRecordClasses">

    <recordClass name="FileRecordClass" urlName="dfile" displayName="File">

      <primaryKey aliasPluginClassName="org.gusdb.wdk.model.record.GenericRecordPrimaryKeyAliasPlugin">
        <columnRef>file_id</columnRef>
      </primaryKey>

      <idAttribute name="primary_key" displayName="File ID">
        <text>
          <![CDATA[$$file_id$$]]>
        </text>
      </idAttribute>

      <reporter name="zippedFiles" displayName="Zipped Files Download" scopes="record, results"
                implementation="org.eupathdb.common.model.report.ZippedFilesReporter"/>

      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
      <!-- BFMV attributes -->  
      <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

      <attributeQueryRef ref="FileAttributes.Bfmv">

        <columnAttribute name="filepath" displayName="path"/>

        <columnAttribute name="filename" displayName="File name"/>

        <linkAttribute name="filelink" displayName="File" >
          <displayText>
            <![CDATA[$$filename$$]]>
          </displayText>
          <url>
            <![CDATA[$filepath$$]]>
          </url>
        </linkAttribute>

        <columnAttribute name="organism" displayName="Organism"/>
        <columnAttribute name="build_num" displayName="Build"/>

        <columnAttribute name="data_type" displayName="Data Type"/>
        <columnAttribute name="file_format" displayName="File Format"/>

        <columnAttribute name="filesize" displayName="Size"/>
        <columnAttribute name="checksum" displayName="Checksum"/>

      </attributeQueryRef>

    </recordClass>
  </recordClassSet>

  <querySet name="FileAttributes" queryType="attribute" isCacheable="false">
    <sqlQuery name="Bfmv">
      <column name="file_id" ignoreCase="true"/>
      <column name="filename" ignoreCase="false"/>
      <column name="filepath" ignoreCase="false"/>
      <column name="link"  ignoreCase="true"/>
      <column name="organism"  ignoreCase="true"/>
      <column name="build_num" ignoreCase="true"/>
      <column name="data_type" ignoreCase="true"/>
      <column name="file_format" ignoreCase="true"/>
      <column name="filesize" ignoreCase="true"/>
      <column name="checksum" ignoreCase="true"/>
      <sql>
        <![CDATA[
          SELECT file_id, filename, filepath, '' as filelink, organism,
                 build_num, data_type, file_format, filesize, checksum
          FROM   apidb.fileAttributes
        ]]>
      </sql>
    </sqlQuery>
  </querySet>

</wdkModel>

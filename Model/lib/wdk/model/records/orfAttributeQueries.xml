<wdkModel>
    <querySet name="OrfAttributes" queryType="attribute" isCacheable="false" excludeProjects="HostDB">

      <defaultTestParamValues includeProjects="PlasmoDB">
         <paramValue name="source_id">Pf3D7_08_v3-5-1196699-1193850</paramValue>
         <paramValue name="project_id">PlasmoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="ToxoDB">
         <paramValue name="source_id">tgme49_asmbl.1910-2-1563158-1563775</paramValue>
         <paramValue name="project_id">ToxoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="CryptoDB">
         <paramValue name="source_id">AAEE01000015-4-52922-52668</paramValue>
         <paramValue name="project_id">CryptoDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="GiardiaDB">
         <paramValue name="source_id">AACB02000007-2-49229-49390</paramValue>
         <paramValue name="project_id">GiardiaDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="TrichDB">
         <paramValue name="source_id">DS164731-2-86-799</paramValue>
         <paramValue name="project_id">TrichDB</paramValue>
      </defaultTestParamValues>

       <!-- TODO revisit source_id --> 
       <defaultTestParamValues includeProjects="TriTrypDB,EuPathDB">
           <paramValue name="source_id">LbrM.26-1-798976-799158</paramValue>
           <paramValue name="project_id">TriTrypDB</paramValue>
       </defaultTestParamValues>

      <defaultTestParamValues includeProjects="AmoebaDB">
         <paramValue name="source_id">DS571186-1-24160-24672</paramValue>
         <paramValue name="project_id">AmoebaDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="MicrosporidiaDB">
         <paramValue name="source_id">ECII_CH06-3-138630-138959</paramValue>
         <paramValue name="project_id">MicrosporidiaDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="PiroplasmaDB">
         <paramValue name="source_id">AAGK01000001-4-2100866-2100489</paramValue>
         <paramValue name="project_id">PiroplasmaDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="FungiDB">
         <paramValue name="source_id">CalbSC5314_Chr4-6-1004314-1001432</paramValue>
         <paramValue name="project_id">FungiDB</paramValue>
      </defaultTestParamValues>

      <defaultTestParamValues includeProjects="SchistoDB,UniDB,InitDB">
         <paramValue name="source_id"></paramValue>
         <paramValue name="project_id"></paramValue>
      </defaultTestParamValues>

       <testRowCountSql>
	 SELECT count(*) FROM ApidbTuning.OrfAttributes
       </testRowCountSql>
       
       <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
       <!--ORF alias -->  
       <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

        <sqlQuery name="OrfAlias" doNotTest="true">
            <column name="source_id"/>
            <column name="project_id"/>
            <column name="old_source_id"/>
            <column name="old_project_id"/>
            <sql>
              <![CDATA[
                SELECT source_id, 
                       project_id,
                       source_id as old_source_id,
                       project_id AS old_project_id
                FROM ApidbTuning.OrfAttributes sa 
              ]]>
            </sql>
        </sqlQuery>

        <sqlQuery name="Bfmv">
            <column name="source_id"/>
            <column name="project_id"/>
            <column name="project_id_lc"/>
            <column name="nas_id"  />
            <!--column name="orf_id"  sortingColumn="source_id" /-->
            <column name="length"  />
            <column name="organism_text"  />
            <column name="formatted_organism"  sortingColumn="organism_text" />
            <column name="orf_start" />
            <column name="orf_end" />
            <column name="orf_context_start" />
            <column name="orf_context_end" />
            <column name="orf_start_text" sortingColumn="orf_start" />
            <column name="orf_end_text" sortingColumn="orf_end" />
            <column name="orf_strand" />
            <sql>
            <![CDATA[
                     SELECT bfmv.source_id, bfmv.project_id, lower(project_id) as project_id_lc, 
                     bfmv.nas_id, bfmv.length, bfmv.organism as organism_text, bfmv.ncbi_tax_id,
                     bfmv.start_min - 300 as orf_context_start, bfmv.end_max + 300 as orf_context_end,
                       '<i>' || SUBSTR(bfmv.organism, 1, 1) || '.' ||
                       REGEXP_REPLACE(SUBSTR(bfmv.organism, INSTR(bfmv.organism, ' ')), '[[:space:]]+',
                                      chr(38) || 'nbsp;') || '</i>'
                         AS formatted_organism,
                      bfmv.start_min as orf_start,bfmv.end_max as orf_end,
                      trim(to_char(bfmv.end_max,'999,999,999')) as orf_end_text,
                      trim(to_char(bfmv.start_min,'999,999,999')) as orf_start_text,
                      decode(bfmv.is_reversed,0,'+',1,'-',null) as orf_strand
                FROM ApidbTuning.OrfAttributes bfmv
        ]]>
           </sql>
        </sqlQuery>


        <sqlQuery name="Browser" excludeProjects="EuPathDB">
            <column name="source_id" />
            <column name="project_id"/>
            <column name="organismAbbrev"/>
            <sql>
            <![CDATA[
             SELECT oa.source_id, oa.project_id, attr.public_abbrev as organismAbbrev
             FROM apidbtuning.orfattributes oa, apidbtuning.organismattributes attr
             WHERE  oa.organism = attr.organism_name 
            ]]>
           </sql>
        </sqlQuery>




	<sqlQuery name="Sequence">
            <column name="source_id"/>
            <column name="project_id"/>
            <column name="sequence"/>
	    <column name="sequence_length"/>
            <sql>
            SELECT source_id, project_id, sequence, length(sequence) AS sequence_length
            FROM apidbTuning.OrfSequence 
            </sql>
        </sqlQuery>
    </querySet>
</wdkModel>

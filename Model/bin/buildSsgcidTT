#!/usr/bin/perl

use lib "$ENV{GUS_HOME}/lib/perl";
use FgpUtil::Util::CommandHelper;
use Getopt::Long qw(GetOptions);
use ApiCommonShared::Model::tmUtils;

my $GUS_HOME = $ENV{GUS_HOME};
my $CLASSPATH = &FgpUtil::Util::CommandHelper::getJavaClasspath($GUS_HOME);

my ($propfile, $instance, $schema, $suffix, $debug);

Getopt::Long::Configure("pass_through");
GetOptions("propfile=s" => \$propfile,
           "instance=s" => \$instance,
           "schema=s" => \$schema,
           "suffix=s" => \$suffix,
           "debug!" => \$debug,
	  );
die "required parameter missing" unless ($propfile && $instance && $suffix);

($instance, $schema, $password) = ApiCommonShared::Model::tmUtils::getDbLoginInfo($instance, $schema, $propfile);

open(PROGRAM, "|java $sysProps -classpath $CLASSPATH org.apidb.apicommon.model.ssgcid.Ssgcid $suffix");
print PROGRAM "$instance\n$schema\n$password";
close(PROGRAM);
